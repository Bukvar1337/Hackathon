  [1m[35m (261.3ms)[0m  [1m[35mCREATE DATABASE "HDataBase3" ENCODING = 'unicode'[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE DATABASE "db/test"."sqlite3" ENCODING = 'unicode'[0m
  [1m[35m (24.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateItemsOrders (20200919183353)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "items_orders" ("item_id" integer, "order_id" integer)[0m
  [1m[36mprimary::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919183353"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20200919192557)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "password" character varying DEFAULT '' NOT NULL, "login" character varying DEFAULT '' NOT NULL, "firstName" character varying DEFAULT '' NOT NULL, "secondName" character varying DEFAULT '' NOT NULL, "sex" character varying DEFAULT '' NOT NULL, "gitLink" character varying DEFAULT '' NOT NULL, "age" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919192557"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateItems (20200919192605)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "description" text, "weight" integer, "price" integer, "user_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919192605"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrders (20200919192610)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "totalPrice" float, "users_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919192610"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-09-19 19:29:41.320999"], ["updated_at", "2020-09-19 19:29:41.320999"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/users" for ::1 at 2020-09-19 22:42:26 +0300
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"email"=>"user6@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user6@mail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user6@mail.com"], ["password", "123456"], ["created_at", "2020-09-19 19:42:26.680745"], ["updated_at", "2020-09-19 19:42:26.680745"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 5.7ms | Allocations: 12176)


  
NoMethodError (undefined method `card' for #<User:0x00005594b187b2c0>):
  
app/controllers/users_controller.rb:30:in `create'
Started POST "/users" for ::1 at 2020-09-19 22:43:10 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user6@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user6@mail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user6@mail.com"], ["password", "123456"], ["created_at", "2020-09-19 19:43:10.769050"], ["updated_at", "2020-09-19 19:43:10.769050"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 4.3ms | Allocations: 8099)


Started GET "/" for ::1 at 2020-09-19 22:43:27 +0300
Processing by Rails::WelcomeController#index as */*
  Parameters: {"email"=>"user6@mail.com", "password"=>"[FILTERED]", "welcome"=>{"email"=>"user6@mail.com", "password"=>"[FILTERED]"}}
  Rendering /home/user/.rvm/gems/ruby-2.7.0/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/user/.rvm/gems/ruby-2.7.0/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 7.2ms | Allocations: 407)
Completed 200 OK in 14ms (Views: 11.3ms | ActiveRecord: 0.0ms | Allocations: 2297)


Started GET "/" for 127.0.0.1 at 2020-09-19 22:52:51 +0300
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  Parameters: {"email"=>"user6@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user6@mail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 3.5ms | Allocations: 7533)


  
ActiveRecord::AssociationNotFoundError (Association named 'card' was not found on User; perhaps you misspelled it?):
  
app/controllers/users_controller.rb:6:in `index'
Started POST "/users" for 127.0.0.1 at 2020-09-19 22:52:59 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user6@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user6@mail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user6@mail.com"], ["password", "123456"], ["created_at", "2020-09-19 19:52:59.412507"], ["updated_at", "2020-09-19 19:52:59.412507"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 3058)


Started GET "/users" for 127.0.0.1 at 2020-09-21 15:47:23 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  Parameters: {"email"=>"user6@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user6@mail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 3.8ms | Allocations: 7196)


  
ActiveRecord::AssociationNotFoundError (Association named 'card' was not found on User; perhaps you misspelled it?):
  
app/controllers/users_controller.rb:6:in `index'
Started GET "/users" for 127.0.0.1 at 2020-09-21 15:47:30 +0300
Processing by UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1151)


  
ActiveRecord::AssociationNotFoundError (Association named 'card' was not found on User; perhaps you misspelled it?):
  
app/controllers/users_controller.rb:6:in `index'
Started GET "/users" for 127.0.0.1 at 2020-09-21 15:48:19 +0300
Processing by UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 8390)


Started POST "/users" for 127.0.0.1 at 2020-09-21 15:48:53 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user1@mail.com"], ["password", "123456"], ["created_at", "2020-09-21 12:48:53.036196"], ["updated_at", "2020-09-21 12:48:53.036196"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 2989)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCarts (20200921125838)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "carts" ("id" bigserial primary key, "user_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921125838"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("login", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["login", "user1"], ["created_at", "2020-09-21 13:02:58.856371"], ["updated_at", "2020-09-21 13:02:58.856371"]]
  [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 5], ["created_at", "2020-09-21 13:03:31.236421"], ["updated_at", "2020-09-21 13:03:31.236421"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Started GET "/users" for 127.0.0.1 at 2020-09-21 16:19:29 +0300
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (5.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 9.0ms | Allocations: 13185)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddNameToCart (20200921132111)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mALTER TABLE "carts" ADD "name" character varying[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921132111"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 5], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "name" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["name", "cart 5"], ["updated_at", "2020-09-21 13:23:08.397432"], ["id", 1]]
  [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
Started GET "/users" for 127.0.0.1 at 2020-09-21 16:23:13 +0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 6.1ms | Allocations: 11831)


Started GET "/users" for 127.0.0.1 at 2020-09-21 16:24:35 +0300
Processing by UsersController#index as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 5.1ms | Allocations: 11998)


Started POST "/users" for 127.0.0.1 at 2020-09-21 16:26:27 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>[{"name"=>"cart"}], "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>[{"name"=>"cart"}]}}
[31mUnpermitted parameter: :cart_attributes[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user1@mail.com"], ["password", "123456"], ["created_at", "2020-09-21 13:26:27.539061"], ["updated_at", "2020-09-21 13:26:27.539061"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:30:in `create'
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 5.8ms | Allocations: 10486)


Started GET "/users" for 127.0.0.1 at 2020-09-21 16:26:47 +0300
Processing by UsersController#index as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>[{"name"=>"cart"}], "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>[{"name"=>"cart"}]}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 11ms (Views: 0.6ms | ActiveRecord: 2.2ms | Allocations: 5993)


Started POST "/users" for 127.0.0.1 at 2020-09-21 16:28:10 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>{"name"=>"cart", "user_id"=>"1"}, "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>{"name"=>"cart", "user_id"=>"1"}}}
[31mUnpermitted parameter: :cart_attributes[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user1@mail.com"], ["password", "123456"], ["created_at", "2020-09-21 13:28:10.452501"], ["updated_at", "2020-09-21 13:28:10.452501"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 7], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:30:in `create'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 3520)


Started GET "/users" for 127.0.0.1 at 2020-09-21 16:29:00 +0300
Processing by UsersController#index as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>{"name"=>"cart", "user_id"=>"1"}, "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>{"name"=>"cart", "user_id"=>"1"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6, $7)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6], ["user_id", 7]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.8ms | Allocations: 3350)


Started POST "/users" for 127.0.0.1 at 2020-09-21 16:33:56 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attribute"=>{"name"=>"cart", "user_id"=>"1"}, "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user1@mail.com"], ["password", "123456"], ["created_at", "2020-09-21 13:33:56.032845"], ["updated_at", "2020-09-21 13:33:56.032845"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 8], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:30:in `create'
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 3502)


Started POST "/users" for 127.0.0.1 at 2020-09-21 16:35:26 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "carts_attributes"=>{"name"=>"cart"}, "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user1@mail.com"], ["password", "123456"], ["created_at", "2020-09-21 13:35:26.981887"], ["updated_at", "2020-09-21 13:35:26.981887"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 9], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:30:in `create'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 3481)


Started POST "/users" for 127.0.0.1 at 2020-09-21 16:38:27 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>{"name"=>"cart"}, "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>{"name"=>"cart"}}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user1@mail.com"], ["password", "123456"], ["created_at", "2020-09-21 13:38:27.905827"], ["updated_at", "2020-09-21 13:38:27.905827"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at", "name") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 10], ["created_at", "2020-09-21 13:38:27.908241"], ["updated_at", "2020-09-21 13:38:27.908241"], ["name", "cart"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 6.3ms | Allocations: 13507)


Started POST "/users" for 127.0.0.1 at 2020-09-21 16:38:36 +0300
Processing by UsersController#create as */*
  Parameters: {"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>{}, "user"=>{"email"=>"user1@mail.com", "password"=>"[FILTERED]", "cart_attributes"=>{}}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "user1@mail.com"], ["password", "123456"], ["created_at", "2020-09-21 13:38:36.635970"], ["updated_at", "2020-09-21 13:38:36.635970"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 11], ["created_at", "2020-09-21 13:38:36.640205"], ["updated_at", "2020-09-21 13:38:36.640205"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 4262)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started GET "/users" for 127.0.0.1 at 2020-09-21 17:38:25 +0300
Processing by UsersController#index as */*
  Parameters: {"user_id"=>"3", "user"=>{}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6], ["user_id", 7], ["user_id", 8], ["user_id", 9], ["user_id", 10], ["user_id", 11]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 17ms (Views: 0.9ms | ActiveRecord: 1.7ms | Allocations: 13468)


Started GET "/items" for 127.0.0.1 at 2020-09-21 17:38:43 +0300
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started GET "/items" for 127.0.0.1 at 2020-09-21 17:38:53 +0300
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started POST "/items" for 127.0.0.1 at 2020-09-21 17:40:03 +0300
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started GET "/items" for 127.0.0.1 at 2020-09-21 17:42:17 +0300
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started GET "/items" for 127.0.0.1 at 2020-09-21 17:43:07 +0300
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started GET "/items" for 127.0.0.1 at 2020-09-21 17:43:22 +0300
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started GET "/items" for 127.0.0.1 at 2020-09-21 17:43:47 +0300
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started GET "/items" for 127.0.0.1 at 2020-09-21 17:44:11 +0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started GET "/items" for 127.0.0.1 at 2020-09-21 17:44:32 +0300
  
NameError (undefined local variable or method `add_item_to_cart' for ItemsController:Class
Did you mean?  add_template_helper):
  
app/controllers/items_controller.rb:2:in `<class:ItemsController>'
app/controllers/items_controller.rb:1:in `<main>'
Started GET "/items" for 127.0.0.1 at 2020-09-21 17:45:45 +0300
Processing by ItemsController#index as */*
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 4344)


Started POST "/items" for 127.0.0.1 at 2020-09-21 17:46:05 +0300
Processing by ItemsController#create as */*
  Parameters: {"name"=>"potato", "item"=>{"name"=>"potato"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[36mItem Create (1.1ms)[0m  [1m[32mINSERT INTO "items" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "potato"], ["user_id", 1], ["created_at", "2020-09-21 14:46:05.468380"], ["updated_at", "2020-09-21 14:46:05.468380"]]
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
Completed 200 OK in 35ms (Views: 0.5ms | ActiveRecord: 9.0ms | Allocations: 16497)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 17:46:34 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"1", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
Completed 500 Internal Server Error in 21ms (ActiveRecord: 3.5ms | Allocations: 11310)


  
NoMethodError (undefined method `items' for #<Cart:0x00007ff0289d5650>):
  
app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCartsItems (20200921145050)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "carts_items" ("cart_id" integer, "item_id" integer)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921145050"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 17:51:48 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"1", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.5ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
Completed 500 Internal Server Error in 69ms (ActiveRecord: 12.6ms | Allocations: 32829)


  
NoMethodError (undefined method `items' for #<Item:0x000055e08e4aceb8>):
  
app/controllers/items_controller.rb:40:in `add_item_to_cart'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 17:53:43 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"1", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.2ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
Completed 500 Internal Server Error in 43ms (ActiveRecord: 11.2ms | Allocations: 27199)


  
NoMethodError (undefined method `items' for #<Item:0x00007fe08c241cc8>):
  
app/controllers/items_controller.rb:40:in `add_item_to_cart'
Started POST "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 17:54:05 +0300
  
ActionController::RoutingError (No route matches [POST] "/items/1/add_item_to_cart"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 17:54:11 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"1", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.3ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
Completed 500 Internal Server Error in 13ms (ActiveRecord: 2.2ms | Allocations: 8239)


  
NoMethodError (undefined method `items' for #<Item:0x00007fe094d08668>):
  
app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (5.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-09-21 14:55:42.792854"], ["updated_at", "2020-09-21 14:55:42.792854"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 12], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Create (1.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 12], ["created_at", "2020-09-21 14:55:55.702330"], ["updated_at", "2020-09-21 14:55:55.702330"]]
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-09-21 14:56:48.123670"], ["updated_at", "2020-09-21 14:56:48.123670"]]
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Create (0.9ms)[0m  [1m[32mINSERT INTO "items" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 13], ["created_at", "2020-09-21 14:57:17.701108"], ["updated_at", "2020-09-21 14:57:17.701108"]]
  [1m[35m (13.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 11]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart::HABTM_Items Create (1.2ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 4], ["item_id", 2]]
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "carts_items" ON "items"."id" = "carts_items"."item_id" WHERE "carts_items"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 4], ["LIMIT", 11]]
  [1m[36mItem Load (1.4ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "carts_items" ON "items"."id" = "carts_items"."item_id" WHERE "carts_items"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 4], ["LIMIT", 11]]
Started POST "/items" for 127.0.0.1 at 2020-09-21 17:59:05 +0300
Processing by ItemsController#create as */*
  Parameters: {"user_id"=>"2", "item"=>{"user_id"=>"2"}}
[31mUnpermitted parameter: :user_id[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[36mItem Create (0.5ms)[0m  [1m[32mINSERT INTO "items" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 1], ["created_at", "2020-09-21 14:59:05.156519"], ["updated_at", "2020-09-21 14:59:05.156519"]]
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.7ms | Allocations: 3973)


Started GET "/items" for 127.0.0.1 at 2020-09-21 17:59:33 +0300
Processing by ItemsController#index as */*
  Parameters: {"user_id"=>"2", "item"=>{"user_id"=>"2"}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 891)


Started POST "/items" for 127.0.0.1 at 2020-09-21 17:59:46 +0300
Processing by ItemsController#create as */*
  Parameters: {"user_id"=>"2", "item"=>{"user_id"=>"2"}}
[31mUnpermitted parameter: :user_id[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[36mItem Create (0.3ms)[0m  [1m[32mINSERT INTO "items" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 1], ["created_at", "2020-09-21 14:59:46.656862"], ["updated_at", "2020-09-21 14:59:46.656862"]]
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 3329)


Started GET "/items" for 127.0.0.1 at 2020-09-21 17:59:55 +0300
Processing by ItemsController#index as */*
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 855)


Started POST "/items" for 127.0.0.1 at 2020-09-21 18:00:53 +0300
Processing by ItemsController#create as */*
  Parameters: {"name"=>"cucmber", "item"=>{"name"=>"cucmber"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[36mItem Create (0.3ms)[0m  [1m[32mINSERT INTO "items" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "cucmber"], ["user_id", 1], ["created_at", "2020-09-21 15:00:53.135540"], ["updated_at", "2020-09-21 15:00:53.135540"]]
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 3336)


Started GET "/items" for 127.0.0.1 at 2020-09-21 18:00:56 +0300
Processing by ItemsController#index as */*
  Parameters: {"name"=>"cucmber", "item"=>{"name"=>"cucmber"}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1001)


Started GET "/items" for 127.0.0.1 at 2020-09-21 18:01:18 +0300
Processing by ItemsController#index as */*
  Parameters: {"name"=>"cucmber", "user_id"=>"11", "item"=>{"name"=>"cucmber", "user_id"=>"11"}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1003)


Started POST "/items" for 127.0.0.1 at 2020-09-21 18:01:23 +0300
Processing by ItemsController#create as */*
  Parameters: {"name"=>"cucmber", "user_id"=>"11", "item"=>{"name"=>"cucmber", "user_id"=>"11"}}
[31mUnpermitted parameter: :user_id[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[36mItem Create (0.5ms)[0m  [1m[32mINSERT INTO "items" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "cucmber"], ["user_id", 1], ["created_at", "2020-09-21 15:01:23.622638"], ["updated_at", "2020-09-21 15:01:23.622638"]]
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 2.0ms | Allocations: 3385)


Started GET "/items" for 127.0.0.1 at 2020-09-21 18:02:04 +0300
Processing by ItemsController#index as */*
  Parameters: {"name"=>"cucmber", "user_id"=>"11", "item"=>{"name"=>"cucmber", "user_id"=>"11"}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 1143)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 18:03:35 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"id"=>"1", "item"=>{}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.2ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 10.2ms | Allocations: 27776)


  
NoMethodError (undefined method `items' for #<Item:0x00007fe094c9b040>):
  
app/controllers/items_controller.rb:41:in `add_item_to_cart'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 18:04:18 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"id"=>"1", "item"=>{}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.2ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "carts_items" ON "items"."id" = "carts_items"."item_id" WHERE "carts_items"."cart_id" = $1[0m  [["cart_id", 3]]
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
Completed 200 OK in 43ms (Views: 0.3ms | ActiveRecord: 11.1ms | Allocations: 26937)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 18:05:09 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"1", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.3ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "carts_items" ON "items"."id" = "carts_items"."item_id" WHERE "carts_items"."cart_id" = $1[0m  [["cart_id", 3]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
Completed 200 OK in 45ms (Views: 0.8ms | ActiveRecord: 12.7ms | Allocations: 25997)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 18:05:33 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"2", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.3ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 2]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "carts_items" ON "items"."id" = "carts_items"."item_id" WHERE "carts_items"."cart_id" = $1[0m  [["cart_id", 3]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 2.6ms | Allocations: 6851)


Started PUT "/items/3/add_item_to_cart" for 127.0.0.1 at 2020-09-21 18:05:49 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"3", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.4ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 3]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "carts_items" ON "items"."id" = "carts_items"."item_id" WHERE "carts_items"."cart_id" = $1[0m  [["cart_id", 3]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 2.6ms | Allocations: 6982)


Started PUT "/items/4/add_item_to_cart" for 127.0.0.1 at 2020-09-21 18:05:54 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"4", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.3ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 4]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "carts_items" ON "items"."id" = "carts_items"."item_id" WHERE "carts_items"."cart_id" = $1[0m  [["cart_id", 3]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 2.8ms | Allocations: 7119)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-21 18:06:01 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"11", "id"=>"5", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mCart::HABTM_Items Create (0.4ms)[0m  [1m[32mINSERT INTO "carts_items" ("cart_id", "item_id") VALUES ($1, $2)[0m  [["cart_id", 3], ["item_id", 5]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "carts_items" ON "items"."id" = "carts_items"."item_id" WHERE "carts_items"."cart_id" = $1[0m  [["cart_id", 3]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 2.6ms | Allocations: 7260)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePositions (20200921153503)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "positions" ("id" bigserial primary key, "cart_id" integer, "item_id" integer, "quantity" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921153503"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePositions (20200921153503)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200921153503"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePositions (20200921153503)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "positions" ("id" bigserial primary key, "cart_id" integer, "item_id" integer, "quantity" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCartsItems (20200921145050)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "carts_items"[0m
  [1m[36mprimary::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200921145050"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddNameToCart (20200921132111)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "carts" DROP COLUMN "name"[0m
  [1m[36mprimary::SchemaMigration Destroy (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200921132111"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddNameToCart (20200921132111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mALTER TABLE "carts" ADD "name" character varying[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921132111"]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCartsItems (20200921145050)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "carts_items" ("cart_id" integer, "item_id" integer)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921145050"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePositions (20200921153503)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "positions" ("id" bigserial primary key, "cart_id" integer, "item_id" integer, "quantity" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePositions (20200921153503)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921153503"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (115.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "HDataBase3"[0m
  [1m[35m (2.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "db/test"."sqlite3"[0m
  [1m[35m (282.8ms)[0m  [1m[35mCREATE DATABASE "HDataBase3" ENCODING = 'unicode'[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE DATABASE "db/test"."sqlite3" ENCODING = 'unicode'[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateItemsOrders (20200919183353)
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "items_orders" ("item_id" integer, "order_id" integer)[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919183353"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20200919192557)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "password" character varying DEFAULT '' NOT NULL, "login" character varying DEFAULT '' NOT NULL, "firstName" character varying DEFAULT '' NOT NULL, "secondName" character varying DEFAULT '' NOT NULL, "sex" character varying DEFAULT '' NOT NULL, "gitLink" character varying DEFAULT '' NOT NULL, "age" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919192557"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateItems (20200919192605)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "description" text, "weight" integer, "price" integer, "user_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919192605"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrders (20200919192610)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "totalPrice" float, "users_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919192610"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCarts (20200921125838)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "carts" ("id" bigserial primary key, "user_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921125838"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddNameToCart (20200921132111)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "carts" ADD "name" character varying[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921132111"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePositions (20200921153503)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921153503"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-09-21 15:49:39.044676"], ["updated_at", "2020-09-21 15:49:39.044676"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePositions (20200921155031)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "positions" ("id" bigserial primary key, "cart_id" integer, "item_id" integer, "quantity" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921155031"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/items" for 127.0.0.1 at 2020-09-21 19:09:00 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ItemsController#index as */*
  Parameters: {"user_id"=>"11", "item"=>{"user_id"=>"11"}}
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 3.4ms | Allocations: 923)


Started GET "/users" for 127.0.0.1 at 2020-09-21 19:09:09 +0300
Processing by UsersController#index as */*
  Parameters: {"user_id"=>"11", "user"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 1036)


Started POST "/users" for 127.0.0.1 at 2020-09-21 19:09:30 +0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"Sergey", "user"=>{}}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 411)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:37:in `user_params'
app/controllers/users_controller.rb:27:in `create'
Started POST "/users" for 127.0.0.1 at 2020-09-21 19:11:08 +0300
Processing by UsersController#create as */*
  Parameters: {"dirstName"=>"Sergey", "user"=>{}}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 402)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:37:in `user_params'
app/controllers/users_controller.rb:27:in `create'
Started POST "/users" for 127.0.0.1 at 2020-09-21 19:11:13 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Sergey", "user"=>{"firstName"=>"Sergey"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Sergey"], ["created_at", "2020-09-21 16:11:13.287654"], ["updated_at", "2020-09-21 16:11:13.287654"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:30:in `create'
Completed 200 OK in 29ms (Views: 0.1ms | ActiveRecord: 5.6ms | Allocations: 15308)


Started POST "/users" for 127.0.0.1 at 2020-09-21 19:11:42 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Andrey", "user"=>{"firstName"=>"Andrey"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Andrey"], ["created_at", "2020-09-21 16:11:42.410565"], ["updated_at", "2020-09-21 16:11:42.410565"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:30:in `create'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 3488)


Started POST "/items" for 127.0.0.1 at 2020-09-21 19:11:49 +0300
Processing by ItemsController#create as */*
  Parameters: {"firstName"=>"Andrey", "item"=>{}}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 402)


  
ActionController::ParameterMissing (param is missing or the value is empty: item):
  
app/controllers/items_controller.rb:46:in `item_params'
app/controllers/items_controller.rb:27:in `create'
Started POST "/items" for 127.0.0.1 at 2020-09-21 19:12:03 +0300
Processing by ItemsController#create as */*
  Parameters: {"name"=>"potato", "item"=>{"name"=>"potato"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[36mItem Create (0.5ms)[0m  [1m[32mINSERT INTO "items" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "potato"], ["user_id", 1], ["created_at", "2020-09-21 16:12:03.507843"], ["updated_at", "2020-09-21 16:12:03.507843"]]
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 3.7ms | Allocations: 10375)


Started POST "/items" for 127.0.0.1 at 2020-09-21 19:12:10 +0300
Processing by ItemsController#create as */*
  Parameters: {"name"=>"cucumber", "item"=>{"name"=>"cucumber"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[36mItem Create (0.4ms)[0m  [1m[32mINSERT INTO "items" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "cucumber"], ["user_id", 1], ["created_at", "2020-09-21 16:12:10.506499"], ["updated_at", "2020-09-21 16:12:10.506499"]]
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 3337)


Started POST "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:12:53 +0300
  
ActionController::RoutingError (No route matches [POST] "/items/1/add_item_to_cart"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:12:58 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"2", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"2"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:54:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.9ms | Allocations: 5773)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/items_controller.rb:40:in `add_item_to_cart'
Started POST "/users" for 127.0.0.1 at 2020-09-21 19:14:13 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Andrey with cart", "cart_attributes"=>{}, "user"=>{"firstName"=>"Andrey with cart", "cart_attributes"=>{}}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Andrey with cart"], ["created_at", "2020-09-21 16:14:13.385490"], ["updated_at", "2020-09-21 16:14:13.385490"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 3], ["created_at", "2020-09-21 16:14:13.388659"], ["updated_at", "2020-09-21 16:14:13.388659"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 7210)


Started POST "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:14:57 +0300
  
ActionController::RoutingError (No route matches [POST] "/items/1/add_item_to_cart"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:15:00 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"3", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"3"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:54:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 3.7ms | Allocations: 5553)


  
ActiveModel::UnknownAttributeError (unknown attribute 'user_id' for Position.):
  
app/controllers/items_controller.rb:40:in `add_item_to_cart'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:16:44 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"3", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"3"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:54:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.6ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 1], ["item_id", 1], ["quantity", 2], ["created_at", "2020-09-21 16:16:44.604750"], ["updated_at", "2020-09-21 16:16:44.604750"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 49ms (Views: 0.1ms | ActiveRecord: 12.3ms | Allocations: 29373)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:17:31 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"3", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"3"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:54:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.3ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 1], ["item_id", 1], ["quantity", 2], ["created_at", "2020-09-21 16:17:31.584934"], ["updated_at", "2020-09-21 16:17:31.584934"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 55ms (ActiveRecord: 12.3ms | Allocations: 31826)


  
NoMethodError (undefined method `items' for #<Position:0x00007fba042aa240>
Did you mean?  item
               item=):
  
app/controllers/items_controller.rb:42:in `add_item_to_cart'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:17:50 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"3", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"3"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:54:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.3ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 1], ["item_id", 1], ["quantity", 2], ["created_at", "2020-09-21 16:17:50.865831"], ["updated_at", "2020-09-21 16:17:50.865831"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[36mCACHE Item Load (0.0ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[36mCACHE Item Load (0.0ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 57ms (Views: 0.3ms | ActiveRecord: 15.0ms | Allocations: 31703)


Started POST "/users" for 127.0.0.1 at 2020-09-21 19:19:21 +0300
Processing by UsersController#create as */*
  Parameters: {"user_id"=>"Sergey with cart", "cart_attributes"=>{}, "user"=>{"cart_attributes"=>{}}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-09-21 16:19:21.537284"], ["updated_at", "2020-09-21 16:19:21.537284"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 4], ["created_at", "2020-09-21 16:19:21.541127"], ["updated_at", "2020-09-21 16:19:21.541127"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 4571)


Started POST "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:19:58 +0300
  
ActionController::RoutingError (No route matches [POST] "/items/1/add_item_to_cart"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:20:02 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:54:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.5ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 2], ["item_id", 1], ["quantity", 2], ["created_at", "2020-09-21 16:20:02.717500"], ["updated_at", "2020-09-21 16:20:02.717500"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 8364)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:34:23 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND "positions"."id" = $2 LIMIT $3[0m  [["cart_id", 2], ["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
Completed 404 Not Found in 28ms (ActiveRecord: 1.4ms | Allocations: 19617)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=item_id = 1 [WHERE "positions"."cart_id" = $1]):
  
app/controllers/items_controller.rb:40:in `add_item_to_cart'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:35:05 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND "positions"."id" = $2 LIMIT $3[0m  [["cart_id", 2], ["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 404 Not Found in 38ms (ActiveRecord: 12.2ms | Allocations: 20852)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=item_id =1 [WHERE "positions"."cart_id" = $1]):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:36:26 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 11]]
Completed 500 Internal Server Error in 44ms (ActiveRecord: 9.4ms | Allocations: 26051)


  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 11]]
  
NoMethodError (undefined method `quantity' for #<Position::ActiveRecord_AssociationRelation:0x00007fba0c00a910>):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 11]]
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:38:04 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =1) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 10.1ms | Allocations: 23972)


  
TypeError (String can't be coerced into Integer):
  
app/controllers/items_controller.rb:44:in `+'
app/controllers/items_controller.rb:44:in `add_item_to_cart'
Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:39:27 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =1) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
Completed 200 OK in 48ms (Views: 0.2ms | ActiveRecord: 14.9ms | Allocations: 26170)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:39:43 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"3", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =1) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 5122)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:39:59 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"3", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[36mPosition Create (0.4ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 2], ["item_id", 2], ["quantity", 3], ["created_at", "2020-09-21 16:39:59.805316"], ["updated_at", "2020-09-21 16:39:59.805316"]]
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 3.7ms | Allocations: 10338)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:40:10 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 2.5ms | Allocations: 6195)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:43:36 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 9.9ms | Allocations: 23755)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:44:14 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 56ms (Views: 0.1ms | ActiveRecord: 10.8ms | Allocations: 23737)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:44:19 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 5.6ms | Allocations: 3430)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:44:23 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 3429)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:44:36 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"3", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 3429)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:44:43 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 3429)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:47:44 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 500 Internal Server Error in 46ms (ActiveRecord: 10.5ms | Allocations: 23939)


  
TypeError (String can't be coerced into Integer):
  
app/controllers/items_controller.rb:44:in `+'
app/controllers/items_controller.rb:44:in `add_item_to_cart'
Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:48:02 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 48ms (Views: 0.1ms | ActiveRecord: 12.3ms | Allocations: 23817)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:48:04 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 3432)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:48:05 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 3431)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:48:09 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"3", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 3431)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:48:13 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"4", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 3431)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:48:17 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 3431)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:49:05 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 500 Internal Server Error in 57ms (ActiveRecord: 9.9ms | Allocations: 24898)


  
NoMethodError (undefined method `save' for 4:Integer):
  
app/controllers/items_controller.rb:45:in `add_item_to_cart'
Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:49:51 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 42ms (Views: 0.3ms | ActiveRecord: 11.2ms | Allocations: 23847)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:49:52 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 3520)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:49:53 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 3519)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:49:54 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 3519)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:52:31 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 500 Internal Server Error in 43ms (ActiveRecord: 10.7ms | Allocations: 23956)


  
TypeError (String can't be coerced into Integer):
  
app/controllers/items_controller.rb:44:in `+'
app/controllers/items_controller.rb:44:in `add_item_to_cart'
Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:52:47 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
Completed 200 OK in 42ms (Views: 0.1ms | ActiveRecord: 10.5ms | Allocations: 23797)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:54:17 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"1", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
Completed 200 OK in 48ms (Views: 1.3ms | ActiveRecord: 11.2ms | Allocations: 25579)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:54:26 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"2", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 1.6ms | Allocations: 5102)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:54:34 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
Completed 200 OK in 10ms (Views: 1.1ms | ActiveRecord: 2.1ms | Allocations: 5101)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:55:09 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 200 OK in 48ms (Views: 0.1ms | ActiveRecord: 10.9ms | Allocations: 24431)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:55:55 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 200 OK in 68ms (Views: 0.1ms | ActiveRecord: 10.7ms | Allocations: 24752)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:56:01 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 4300)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:56:02 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 4299)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:56:03 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 4299)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:56:03 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 4299)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:56:33 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 500 Internal Server Error in 52ms (ActiveRecord: 10.5ms | Allocations: 26678)


  
NoMethodError (undefined method `position' for #<Cart:0x00007fba04643988>
Did you mean?  positions
               positions=):
  
app/controllers/items_controller.rb:46:in `add_item_to_cart'
Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:56:49 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 11]]
Completed 500 Internal Server Error in 45ms (ActiveRecord: 10.7ms | Allocations: 27665)


  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 11]]
  
NoMethodError (undefined method `save' for #<Position::ActiveRecord_Associations_CollectionProxy:0x00007fba18912b00>):
  
app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 11]]
Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:58:43 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 18], ["updated_at", "2020-09-21 16:58:43.382414"], ["id", 5]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
Completed 200 OK in 52ms (Views: 0.1ms | ActiveRecord: 12.7ms | Allocations: 28807)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 19:58:44 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[36mCACHE Position Load (0.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 33], ["updated_at", "2020-09-21 16:58:44.658327"], ["id", 5]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 7746)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 20:00:03 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 48], ["updated_at", "2020-09-21 17:00:03.313737"], ["id", 5]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
Completed 200 OK in 49ms (Views: 0.2ms | ActiveRecord: 13.1ms | Allocations: 31027)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 20:00:09 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =1) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 17], ["updated_at", "2020-09-21 17:00:09.416967"], ["id", 4]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 9835)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 20:00:54 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 63], ["updated_at", "2020-09-21 17:00:54.615376"], ["id", 5]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 9834)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-21 20:01:13 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"1", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =1) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 32], ["updated_at", "2020-09-21 17:01:13.726855"], ["id", 4]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 3.1ms | Allocations: 9834)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-21 20:01:42 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"2", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =2) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:43:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 78], ["updated_at", "2020-09-21 17:01:42.035383"], ["id", 5]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 9834)


Started POST "/items" for 127.0.0.1 at 2020-09-21 20:03:31 +0300
Processing by ItemsController#create as */*
  Parameters: {"name"=>"apple", "item"=>{"name"=>"apple"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[36mItem Create (0.4ms)[0m  [1m[32mINSERT INTO "items" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "apple"], ["user_id", 1], ["created_at", "2020-09-21 17:03:31.278997"], ["updated_at", "2020-09-21 17:03:31.278997"]]
  ↳ app/controllers/items_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:29:in `create'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 3874)


Started PUT "/items/3/add_item_to_cart" for 127.0.0.1 at 2020-09-21 20:03:44 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"4", "quantity"=>"15", "id"=>"3", "item"=>{"user_id"=>"4"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:61:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:38:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 3) LIMIT $2[0m  [["cart_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[36mPosition Create (0.5ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 2], ["item_id", 3], ["quantity", 15], ["created_at", "2020-09-21 17:03:44.187879"], ["updated_at", "2020-09-21 17:03:44.187879"]]
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:41:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
Completed 200 OK in 42ms (Views: 14.0ms | ActiveRecord: 5.7ms | Allocations: 11342)


Started POST "/items" for 127.0.0.1 at 2020-09-21 20:08:08 +0300
Processing by ItemsController#create as */*
  Parameters: {"name"=>"pear", "user_id"=>"4", "item"=>{"name"=>"pear", "user_id"=>"4"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[36mItem Create (0.4ms)[0m  [1m[32mINSERT INTO "items" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "pear"], ["user_id", 4], ["created_at", "2020-09-21 17:08:09.072054"], ["updated_at", "2020-09-21 17:08:09.072054"]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:28:in `create'
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 6.4ms | Allocations: 15631)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:04:21 +0300
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"pear", "user_id"=>"4", "user"=>{}}
Completed 400 Bad Request in 2ms (ActiveRecord: 2.1ms | Allocations: 447)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:37:in `user_params'
app/controllers/users_controller.rb:27:in `create'
Started GET "/users" for 127.0.0.1 at 2020-09-24 08:04:25 +0300
Processing by UsersController#index as */*
  Parameters: {"name"=>"pear", "user_id"=>"4", "user"=>{}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 28ms (Views: 0.4ms | ActiveRecord: 6.7ms | Allocations: 15299)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:04:54 +0300
Processing by UsersController#create as */*
  Parameters: {"name"=>"Danil", "user"=>{}}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 403)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:37:in `user_params'
app/controllers/users_controller.rb:27:in `create'
Started POST "/users" for 127.0.0.1 at 2020-09-24 08:05:11 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Danil", "user"=>{"firstName"=>"Danil"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Danil"], ["created_at", "2020-09-24 05:05:11.478955"], ["updated_at", "2020-09-24 05:05:11.478955"]]
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:29:in `create'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:30:in `create'
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 2.5ms | Allocations: 6863)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:07:39 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Danil 2", "user"=>{"firstName"=>"Danil 2"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Danil 2"], ["created_at", "2020-09-24 05:07:39.206322"], ["updated_at", "2020-09-24 05:07:39.206322"]]
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:31:in `create'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 7.9ms | Allocations: 15607)


Started GET "/users" for 127.0.0.1 at 2020-09-24 08:08:06 +0300
Processing by UsersController#index as */*
  Parameters: {"firstName"=>"Danil 2", "user"=>{"firstName"=>"Danil 2"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 3264)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:08:52 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Danil 3", "user"=>{"firstName"=>"Danil 3"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Danil 3"], ["created_at", "2020-09-24 05:08:52.878978"], ["updated_at", "2020-09-24 05:08:52.878978"]]
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 7], ["created_at", "2020-09-24 05:08:52.893628"], ["updated_at", "2020-09-24 05:08:52.893628"]]
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 7], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:31:in `create'
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 18177)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:09:15 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Danil 4", "user"=>{"firstName"=>"Danil 4"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Danil 4"], ["created_at", "2020-09-24 05:09:15.558296"], ["updated_at", "2020-09-24 05:09:15.558296"]]
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 8], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:31:in `create'
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 7.0ms | Allocations: 14530)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:09:31 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Danil 5", "user"=>{"firstName"=>"Danil 5"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Danil 5"], ["created_at", "2020-09-24 05:09:31.288157"], ["updated_at", "2020-09-24 05:09:31.288157"]]
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 9], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:31:in `create'
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 6.6ms | Allocations: 13271)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:09:52 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Danil 6", "user"=>{"firstName"=>"Danil 6"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Danil 6"], ["created_at", "2020-09-24 05:09:52.532304"], ["updated_at", "2020-09-24 05:09:52.532304"]]
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
Completed 422 Unprocessable Entity in 21ms (Views: 0.2ms | ActiveRecord: 6.0ms | Allocations: 13067)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:10:33 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Danil 7", "user"=>{"firstName"=>"Danil 7"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Danil 7"], ["created_at", "2020-09-24 05:10:33.522485"], ["updated_at", "2020-09-24 05:10:33.522485"]]
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 11], ["created_at", "2020-09-24 05:10:33.539666"], ["updated_at", "2020-09-24 05:10:33.539666"]]
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:30:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:31:in `create'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 8.7ms | Allocations: 17900)


Started POST "/users" for 127.0.0.1 at 2020-09-24 08:11:03 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Danil 8", "user"=>{"firstName"=>"Danil 8"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Danil 8"], ["created_at", "2020-09-24 05:11:03.585057"], ["updated_at", "2020-09-24 05:11:03.585057"]]
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 12], ["created_at", "2020-09-24 05:11:03.604768"], ["updated_at", "2020-09-24 05:11:03.604768"]]
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 12], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:31:in `create'
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 10.1ms | Allocations: 21025)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:26:53 +0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CartsController#show as */*
  Parameters: {"firstName"=>"Danil 8", "id"=>"3", "cart"=>{}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 3.9ms | Allocations: 6041)


  
NoMethodError (undefined method `includes' for #<Cart:0x0000561c9e091530>):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:26:58 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms | Allocations: 2921)


  
NoMethodError (undefined method `includes' for #<Cart:0x00007f1ed001d998>):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:27:32 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mPosition Load (0.9ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 3]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 5.0ms | Allocations: 8585)


Started GET "/users/4/cart" for 127.0.0.1 at 2020-09-24 08:27:46 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"4"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 4]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1527)


Started GET "/users/5/cart" for 127.0.0.1 at 2020-09-24 08:27:51 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"5"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 5]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1527)


Started GET "/users/6/cart" for 127.0.0.1 at 2020-09-24 08:27:55 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms | Allocations: 904)


  
ActiveRecord::RecordNotFound (Couldn't find Cart with 'id'=6):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/7/cart" for 127.0.0.1 at 2020-09-24 08:28:02 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"7"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms | Allocations: 903)


  
ActiveRecord::RecordNotFound (Couldn't find Cart with 'id'=7):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/8/cart" for 127.0.0.1 at 2020-09-24 08:28:03 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"8"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms | Allocations: 903)


  
ActiveRecord::RecordNotFound (Couldn't find Cart with 'id'=8):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/9/cart" for 127.0.0.1 at 2020-09-24 08:28:05 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"9"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms | Allocations: 904)


  
ActiveRecord::RecordNotFound (Couldn't find Cart with 'id'=9):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/10/cart" for 127.0.0.1 at 2020-09-24 08:28:12 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"10"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms | Allocations: 905)


  
ActiveRecord::RecordNotFound (Couldn't find Cart with 'id'=10):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/11/cart" for 127.0.0.1 at 2020-09-24 08:28:15 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"11"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 404 Not Found in 2ms (ActiveRecord: 0.4ms | Allocations: 903)


  
ActiveRecord::RecordNotFound (Couldn't find Cart with 'id'=11):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/12/cart" for 127.0.0.1 at 2020-09-24 08:28:17 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"12"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 404 Not Found in 3ms (ActiveRecord: 0.4ms | Allocations: 903)


  
ActiveRecord::RecordNotFound (Couldn't find Cart with 'id'=12):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/1/cart" for 127.0.0.1 at 2020-09-24 08:28:19 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 8149)


Started GET "/users/2/cart" for 127.0.0.1 at 2020-09-24 08:28:25 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1879)


Started GET "/users/2/cart" for 127.0.0.1 at 2020-09-24 08:29:32 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 4.6ms | Allocations: 11393)


Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:29:35 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 5.3ms | Allocations: 9970)


Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:29:53 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 5.7ms | Allocations: 15724)


  
NoMethodError (undefined method `includes' for #<Cart:0x00007f1edc890bf0>):
  
app/controllers/carts_controller.rb:6:in `show'
Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:30:39 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 5.4ms | Allocations: 15826)


  
NoMethodError (undefined method `includes' for #<Cart:0x00007f1ed01242b0>):
  
app/controllers/carts_controller.rb:6:in `show'
Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:54:30 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.9ms | Allocations: 15497)


  
NoMethodError (undefined method `includes' for #<Cart:0x00007f1ec8190008>):
  
app/controllers/carts_controller.rb:6:in `show'
Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:56:43 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
Completed 500 Internal Server Error in 39ms (ActiveRecord: 10.6ms | Allocations: 15780)


  
NoMethodError (undefined method `render' for #<Cart:0x0000561c9d357270>):
  
app/controllers/carts_controller.rb:6:in `show'
Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:57:03 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 7.3ms | Allocations: 19420)


Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:58:19 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 500 Internal Server Error in 18ms (ActiveRecord: 3.0ms | Allocations: 10778)


  
NoMethodError (undefined method `includes' for #<User:0x00007f1ecc01d938>):
  
app/controllers/carts_controller.rb:5:in `show'
Started GET "/users/3/cart" for 127.0.0.1 at 2020-09-24 08:59:42 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 3]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 7.0ms | Allocations: 20219)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddFullPriceToCart (20200924060759)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "carts" ADD "fullPrice" integer[0m
  [1m[36mprimary::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200924060759"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/items" for 127.0.0.1 at 2020-09-24 09:35:11 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ItemsController#create as */*
  Parameters: {"name"=>"pineapple", "price"=>15, "user_id"=>"4", "item"=>{"name"=>"pineapple", "price"=>15, "user_id"=>"4"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[36mItem Create (1.4ms)[0m  [1m[32mINSERT INTO "items" ("name", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "pineapple"], ["price", 15], ["user_id", 4], ["created_at", "2020-09-24 06:35:11.436851"], ["updated_at", "2020-09-24 06:35:11.436851"]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:28:in `create'
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 18196)


Started POST "/users" for 127.0.0.1 at 2020-09-24 09:36:23 +0300
Processing by UsersController#create as */*
  Parameters: {"firstName"=>"Sergey for pineapple", "user"=>{"firstName"=>"Sergey for pineapple"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("firstName", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["firstName", "Sergey for pineapple"], ["created_at", "2020-09-24 06:36:23.775437"], ["updated_at", "2020-09-24 06:36:23.775437"]]
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:27:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 13], ["created_at", "2020-09-24 06:36:23.792506"], ["updated_at", "2020-09-24 06:36:23.792506"]]
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:28:in `create'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:31:in `create'
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 6.1ms | Allocations: 14039)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 09:36:55 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"13", "quantity"=>1, "id"=>"5", "item"=>{"user_id"=>"13"}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.7ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 5], ["quantity", 1], ["created_at", "2020-09-24 06:36:55.756663"], ["updated_at", "2020-09-24 06:36:55.756663"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 6.3ms | Allocations: 20058)


  
NoMethodError (undefined method `first' for #<Item:0x00007fc82c1ec368>):
  
app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
app/controllers/items_controller.rb:49:in `add_item_to_cart'
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 09:37:54 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"13", "quantity"=>1, "id"=>"5", "item"=>{"user_id"=>"13"}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 2], ["updated_at", "2020-09-24 06:37:54.980470"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 58ms (Views: 0.2ms | ActiveRecord: 13.4ms | Allocations: 30518)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:38:40 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.4ms | Allocations: 3388)


  
NoMethodError (undefined method `carts' for #<User:0x00007fc82c3627d8>
Did you mean?  cart
               cart=):
  
app/controllers/carts_controller.rb:6:in `show'
Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:39:05 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 8.3ms | Allocations: 19688)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 09:40:52 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"13", "quantity"=>1, "id"=>"5", "item"=>{"user_id"=>"13"}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:66:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 3], ["updated_at", "2020-09-24 06:40:52.597380"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 15], ["updated_at", "2020-09-24 06:40:52.602950"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 60ms (Views: 0.2ms | ActiveRecord: 15.3ms | Allocations: 32923)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:41:03 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 2383)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:41:21 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 2390)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 09:41:26 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"13", "quantity"=>1, "id"=>"5", "item"=>{"user_id"=>"13"}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:66:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 4], ["updated_at", "2020-09-24 06:41:26.080078"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 3.8ms | Allocations: 8894)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:41:29 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 2377)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:41:30 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 2375)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:41:31 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 2375)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:48:08 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 28ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 19146)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 09:48:14 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"13", "quantity"=>1, "id"=>"5", "item"=>{"user_id"=>"13"}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:66:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 5], ["updated_at", "2020-09-24 06:48:14.355328"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
  [1m[36mCart Update (0.3ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 75], ["updated_at", "2020-09-24 06:48:14.360647"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 15857)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:48:16 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.3ms | Allocations: 2376)


Started POST "/items" for 127.0.0.1 at 2020-09-24 09:52:38 +0300
Processing by ItemsController#create as */*
  Parameters: {"name"=>"orange", "price"=>100, "user_id"=>"4", "item"=>{"name"=>"orange", "price"=>100, "user_id"=>"4"}}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[36mItem Create (0.9ms)[0m  [1m[32mINSERT INTO "items" ("name", "price", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "orange"], ["price", 100], ["user_id", 4], ["created_at", "2020-09-24 06:52:38.123935"], ["updated_at", "2020-09-24 06:52:38.123935"]]
  ↳ app/controllers/items_controller.rb:28:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:28:in `create'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 4746)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 09:55:01 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>"13", "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>"13"}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:66:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.4ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 06:55:01.303376"], ["updated_at", "2020-09-24 06:55:01.303376"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
  [1m[36mCart Update (0.4ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 275], ["updated_at", "2020-09-24 06:55:01.310428"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 12410)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 09:55:04 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.3ms | Allocations: 2497)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 10:08:26 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:72:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.8ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 4], ["updated_at", "2020-09-24 07:08:26.317061"], ["id", 8]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:49:in `add_item_to_cart'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 475], ["updated_at", "2020-09-24 07:08:26.328877"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 90ms (Views: 0.5ms | ActiveRecord: 9.0ms | Allocations: 33302)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 10:08:39 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 11ms (Views: 0.5ms | ActiveRecord: 1.9ms | Allocations: 2506)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started DELETE "/items/6/remove_item_from_cart" for 127.0.0.1 at 2020-09-24 10:36:52 +0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [DELETE] "/items/6/remove_item_from_cart"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started DELETE "/items/6/remove_item_from_cart" for 127.0.0.1 at 2020-09-24 10:37:12 +0300
Processing by ItemsController#remove_item_from_cart as */*
  Parameters: {"id"=>"6", "item"=>{"id"=>"6"}}
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:58:in `remove_item_from_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `remove_item_from_cart'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:59:in `remove_item_from_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:60:in `remove_item_from_cart'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 6]]
  ↳ app/controllers/items_controller.rb:60:in `remove_item_from_cart'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:60:in `remove_item_from_cart'
Redirected to http://localhost:3000/users/4
Completed 302 Found in 54ms (ActiveRecord: 15.5ms | Allocations: 20539)


Started GET "/users/4" for 127.0.0.1 at 2020-09-24 10:37:12 +0300
Processing by UsersController#show as */*
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:42:in `find_user'
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 925)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 10:37:35 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (1.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 24ms (Views: 0.5ms | ActiveRecord: 3.0ms | Allocations: 6246)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 10:37:59 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 14ms (Views: 0.6ms | ActiveRecord: 1.8ms | Allocations: 2497)


Started GET "/positions" for 127.0.0.1 at 2020-09-24 10:40:04 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 17ms (Views: 0.4ms | ActiveRecord: 4.7ms | Allocations: 5318)


Started DELETE "/items/6/remove_item_from_cart" for 127.0.0.1 at 2020-09-24 10:41:05 +0300
Processing by ItemsController#remove_item_from_cart as */*
  Parameters: {"id"=>"6", "item"=>{"id"=>"6"}}
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:58:in `remove_item_from_cart'
Completed 404 Not Found in 9ms (ActiveRecord: 6.0ms | Allocations: 1896)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=6):
  
app/controllers/items_controller.rb:58:in `remove_item_from_cart'
Started DELETE "/items/6/remove_item_from_cart" for 127.0.0.1 at 2020-09-24 10:41:56 +0300
Processing by ItemsController#remove_item_from_cart as */*
  Parameters: {"id"=>"6", "item"=>{"id"=>"6"}}
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:58:in `remove_item_from_cart'
Completed 404 Not Found in 3ms (ActiveRecord: 0.6ms | Allocations: 916)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=6):
  
app/controllers/items_controller.rb:58:in `remove_item_from_cart'
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started DELETE "/positions/8" for 127.0.0.1 at 2020-09-24 10:56:33 +0300
Processing by PositionsController#destroy as */*
  Parameters: {"id"=>"8"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `destroy'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `destroy'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `destroy'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `destroy'
  [1m[36mPosition Destroy (0.4ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 8]]
  ↳ app/controllers/positions_controller.rb:10:in `destroy'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `destroy'
Redirected to http://localhost:3000/users/13
Completed 302 Found in 67ms (ActiveRecord: 12.1ms | Allocations: 19297)


Started GET "/users/13" for 127.0.0.1 at 2020-09-24 10:56:33 +0300
Processing by UsersController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:42:in `find_user'
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 885)


Started GET "/positions" for 127.0.0.1 at 2020-09-24 10:56:42 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 1362)


Started GET "/users/13/cart" for 127.0.0.1 at 2020-09-24 10:56:47 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:6:in `show'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:7:in `show'
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 1.6ms | Allocations: 4236)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:14:07 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.7ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 08:14:08.117091"], ["updated_at", "2020-09-24 08:14:08.117091"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 73ms (ActiveRecord: 8.3ms | Allocations: 28841)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:14:08 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 78)


Started GET "/users/13" for 127.0.0.1 at 2020-09-24 11:15:02 +0300
Processing by UsersController#show as */*
  Parameters: {"id"=>"13"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:42:in `find_user'
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 882)


Started GET "/users" for 127.0.0.1 at 2020-09-24 11:15:39 +0300
Processing by UsersController#index as */*
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6], ["user_id", 7], ["user_id", 8], ["user_id", 9], ["user_id", 10], ["user_id", 11], ["user_id", 12], ["user_id", 13]]
  ↳ app/controllers/users_controller.rb:6:in `index'
Completed 200 OK in 25ms (Views: 1.4ms | ActiveRecord: 1.5ms | Allocations: 8295)


Started GET "/items" for 127.0.0.1 at 2020-09-24 11:18:49 +0300
Processing by ItemsController#index as */*
  [1m[36mItem Load (1.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 1.5ms | Allocations: 1571)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:19:18 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (2.1ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 7], ["updated_at", "2020-09-24 08:19:18.936640"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 34ms (ActiveRecord: 6.4ms | Allocations: 7178)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:19:18 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 71)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:20:41 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 9], ["updated_at", "2020-09-24 08:20:41.641369"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 83ms (ActiveRecord: 15.6ms | Allocations: 28733)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:20:41 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 77)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:22:25 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 71)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:24:22 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:20:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 11146)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:24:33 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 11], ["updated_at", "2020-09-24 08:24:33.510886"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 59ms (ActiveRecord: 13.5ms | Allocations: 19948)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:24:33 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:20:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 1780)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:24:45 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.9ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 13], ["updated_at", "2020-09-24 08:24:45.291360"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 33ms (ActiveRecord: 5.7ms | Allocations: 7104)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:24:45 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:20:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 1780)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:30:59 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.8ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 15], ["updated_at", "2020-09-24 08:30:59.352213"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 79ms (ActiveRecord: 6.1ms | Allocations: 28133)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:30:59 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:20:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 2104)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:35:47 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 17], ["updated_at", "2020-09-24 08:35:47.579584"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/5
Completed 302 Found in 76ms (ActiveRecord: 20.0ms | Allocations: 29228)


Started GET "/carts/5" for 127.0.0.1 at 2020-09-24 11:35:47 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"5"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:20:in `find_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 5]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 1850)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:38:10 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 19], ["updated_at", "2020-09-24 08:38:10.334775"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 500 Internal Server Error in 297ms (ActiveRecord: 20.4ms | Allocations: 109438)


  
NameError (undefined local variable or method `id' for #<ItemsController:0x00007fce3c1a1898>):
  
app/controllers/items_controller.rb:47:in `add_item_to_cart'
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:39:30 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.8ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 21], ["updated_at", "2020-09-24 08:39:30.468323"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 500 Internal Server Error in 300ms (ActiveRecord: 20.4ms | Allocations: 109431)


  
NameError (undefined local variable or method `id' for #<ItemsController:0x00007fce400deec0>):
  
app/controllers/items_controller.rb:47:in `add_item_to_cart'
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:40:45 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 23], ["updated_at", "2020-09-24 08:40:46.118805"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Completed 500 Internal Server Error in 223ms (ActiveRecord: 18.5ms | Allocations: 109462)


  
NameError (undefined local variable or method `cart_id' for #<ItemsController:0x00007fce4c8018b8>
Did you mean?  cart_url):
  
app/controllers/items_controller.rb:47:in `add_item_to_cart'
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:41:13 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 25], ["updated_at", "2020-09-24 08:41:13.385198"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 74ms (ActiveRecord: 19.6ms | Allocations: 29317)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:41:13 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:20:in `find_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 2098)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:42:51 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 27], ["updated_at", "2020-09-24 08:42:51.462483"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 85ms (ActiveRecord: 20.3ms | Allocations: 29235)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:42:51 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 2098)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:53:57 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.8ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 29], ["updated_at", "2020-09-24 08:53:57.410623"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 69ms (ActiveRecord: 5.9ms | Allocations: 28101)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 11:53:57 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 2104)


Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:54:08 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 31], ["updated_at", "2020-09-24 08:54:09.005340"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6/refresh
Completed 302 Found in 77ms (ActiveRecord: 20.4ms | Allocations: 28792)


Started GET "/carts/6/refresh" for 127.0.0.1 at 2020-09-24 11:54:09 +0300
  
ActionController::RoutingError (No route matches [GET] "/carts/6/refresh"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:54:50 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 33], ["updated_at", "2020-09-24 08:54:51.038044"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6/refresh
Completed 302 Found in 69ms (ActiveRecord: 16.7ms | Allocations: 29219)


Started GET "/carts/6/refresh" for 127.0.0.1 at 2020-09-24 11:54:51 +0300
  
ActionController::RoutingError (No route matches [GET] "/carts/6/refresh"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 11:55:05 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:60:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (11.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.8ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 35], ["updated_at", "2020-09-24 08:55:05.475866"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
Redirected to http://localhost:3000/carts/6/refresh
Completed 302 Found in 32ms (ActiveRecord: 15.7ms | Allocations: 7159)


Started GET "/carts/6/refresh" for 127.0.0.1 at 2020-09-24 11:55:05 +0300
  
ActionController::RoutingError (No route matches [GET] "/carts/6/refresh"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:12:19 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.9ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =5) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (1.0ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 37], ["updated_at", "2020-09-24 10:12:19.541022"], ["id", 7]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 755], ["updated_at", "2020-09-24 10:12:19.552445"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
Completed 200 OK in 86ms (Views: 0.5ms | ActiveRecord: 9.4ms | Allocations: 33253)


Started DELETE "/positions/9" for 127.0.0.1 at 2020-09-24 13:15:21 +0300
Processing by PositionsController#destroy as */*
  Parameters: {"id"=>"9"}
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `destroy'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `destroy'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.8ms | Allocations: 2125)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/positions_controller.rb:11:in `destroy'
Started DELETE "/positions/9" for 127.0.0.1 at 2020-09-24 13:16:17 +0300
Processing by PositionsController#destroy as */*
  Parameters: {"id"=>"9"}
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `destroy'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `destroy'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:12:in `destroy'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in destroy'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in destroy'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
  [1m[36mPosition Destroy (0.5ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 9]]
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 92ms (ActiveRecord: 20.0ms | Allocations: 31769)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:16:17 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1700)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:16:49 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.5ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 10:16:49.648506"], ["updated_at", "2020-09-24 10:16:49.648506"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 9069)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:17:03 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 4], ["updated_at", "2020-09-24 10:17:03.134901"], ["id", 10]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 955], ["updated_at", "2020-09-24 10:17:03.154922"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
Completed 200 OK in 66ms (Views: 1.1ms | ActiveRecord: 8.2ms | Allocations: 11927)


Started DELETE "/positions/10" for 127.0.0.1 at 2020-09-24 13:17:10 +0300
Processing by PositionsController#destroy as */*
  Parameters: {"id"=>"10"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `destroy'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `destroy'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:12:in `destroy'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in destroy'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in destroy'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
  [1m[36mPosition Destroy (0.4ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 10]]
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 48ms (ActiveRecord: 5.1ms | Allocations: 8003)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:17:10 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 1658)


Started DELETE "/positions/7" for 127.0.0.1 at 2020-09-24 13:19:55 +0300
Processing by PositionsController#destroy as */*
  Parameters: {"id"=>"7"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `destroy'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `destroy'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:12:in `destroy'
  [1m[36mItem Load (1.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in destroy'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 555], ["updated_at", "2020-09-24 10:19:55.757145"], ["id", 6]]
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:16:in `destroy'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
  [1m[36mPosition Destroy (0.8ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 7]]
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `destroy'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 40ms (ActiveRecord: 7.9ms | Allocations: 8038)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:19:55 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1536)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:23:48 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.4ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 10:23:48.890112"], ["updated_at", "2020-09-24 10:23:48.890112"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 70ms (Views: 0.3ms | ActiveRecord: 15.6ms | Allocations: 30241)


Started PUT "/positions/11/delete" for 127.0.0.1 at 2020-09-24 13:25:49 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"11"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:12:in `delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 200], ["updated_at", "2020-09-24 10:25:49.386322"], ["id", 6]]
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 11]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 77ms (ActiveRecord: 16.1ms | Allocations: 31747)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:25:49 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1575)


Started PUT "/positions/11/delete" for 127.0.0.1 at 2020-09-24 13:26:16 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"11"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 3ms (ActiveRecord: 0.5ms | Allocations: 906)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=11):
  
app/controllers/positions_controller.rb:8:in `delete'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:26:22 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.5ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 10:26:22.250909"], ["updated_at", "2020-09-24 10:26:22.250909"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 4.5ms | Allocations: 8950)


Started GET "/positions" for 127.0.0.1 at 2020-09-24 13:26:32 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 1357)


Started PUT "/positions/12/delete" for 127.0.0.1 at 2020-09-24 13:27:06 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"12"}
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:12:in `delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mPosition Destroy (2.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 12]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 29ms (ActiveRecord: 6.8ms | Allocations: 7248)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:27:06 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1536)


Started PUT "/positions/12/delete" for 127.0.0.1 at 2020-09-24 13:30:15 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"12"}
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 7ms (ActiveRecord: 3.5ms | Allocations: 2029)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=12):
  
app/controllers/positions_controller.rb:8:in `delete'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:30:25 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.4ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 10:30:25.627659"], ["updated_at", "2020-09-24 10:30:25.627659"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 66ms (Views: 0.2ms | ActiveRecord: 14.6ms | Allocations: 29392)


Started PUT "/positions/12/delete" for 127.0.0.1 at 2020-09-24 13:30:40 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"12"}
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 3ms (ActiveRecord: 0.4ms | Allocations: 906)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=12):
  
app/controllers/positions_controller.rb:8:in `delete'
Started PUT "/positions/13/delete" for 127.0.0.1 at 2020-09-24 13:30:45 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"13"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:12:in `delete'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:16:in `delete'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 25ms (ActiveRecord: 2.9ms | Allocations: 5817)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:30:45 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 1690)


  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 400], ["updated_at", "2020-09-24 10:33:44.026145"], ["id", 6]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Started PUT "/positions/13/delete" for 127.0.0.1 at 2020-09-24 13:33:53 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"13"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:12:in `delete'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `block in delete'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 200], ["updated_at", "2020-09-24 10:33:53.760482"], ["id", 6]]
  ↳ app/controllers/positions_controller.rb:16:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:16:in `delete'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 27ms (ActiveRecord: 4.5ms | Allocations: 6200)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:33:53 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1658)


Started PUT "/positions/13/delete" for 127.0.0.1 at 2020-09-24 13:36:10 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"13"}
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 13]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 0], ["updated_at", "2020-09-24 10:36:10.174468"], ["id", 6]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Completed 200 OK in 62ms (Views: 0.2ms | ActiveRecord: 14.6ms | Allocations: 24666)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:36:46 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.5ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 10:36:46.366583"], ["updated_at", "2020-09-24 10:36:46.366583"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 68ms (Views: 0.2ms | ActiveRecord: 16.5ms | Allocations: 30207)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:36:59 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.8ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 4], ["updated_at", "2020-09-24 10:36:59.040683"], ["id", 14]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 400], ["updated_at", "2020-09-24 10:36:59.051910"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
Completed 200 OK in 48ms (Views: 0.3ms | ActiveRecord: 7.6ms | Allocations: 11194)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:37:01 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 6], ["updated_at", "2020-09-24 10:37:01.841006"], ["id", 14]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 600], ["updated_at", "2020-09-24 10:37:01.851051"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
Completed 200 OK in 57ms (Views: 0.4ms | ActiveRecord: 7.5ms | Allocations: 11044)


Started PUT "/positions/14/delete" for 127.0.0.1 at 2020-09-24 13:37:10 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"14"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (2.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.5ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 14]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 0], ["updated_at", "2020-09-24 10:37:10.967134"], ["id", 6]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 37ms (ActiveRecord: 7.3ms | Allocations: 7681)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:37:10 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1567)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:37:14 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.7ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 10:37:14.611390"], ["updated_at", "2020-09-24 10:37:14.611390"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:53:in `add_item_to_cart'
Completed 200 OK in 33ms (Views: 0.4ms | ActiveRecord: 5.1ms | Allocations: 8254)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:37:30 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Update (0.8ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 4], ["updated_at", "2020-09-24 10:37:30.136238"], ["id", 15]]
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:45:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 400], ["updated_at", "2020-09-24 10:37:30.146797"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:51:in `add_item_to_cart'
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 7.8ms | Allocations: 11041)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:41:36 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.9ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 73ms (ActiveRecord: 14.4ms | Allocations: 26500)


  
NoMethodError (undefined method `+' for #<Position:0x00005612457cc970>):
  
app/controllers/items_controller.rb:42:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:42:45 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 64ms (ActiveRecord: 14.5ms | Allocations: 25064)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:43:46 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 73ms (ActiveRecord: 16.8ms | Allocations: 25048)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/positions/14/delete" for 127.0.0.1 at 2020-09-24 13:52:00 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"14"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 4ms (ActiveRecord: 1.0ms | Allocations: 1068)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=14):
  
app/controllers/positions_controller.rb:8:in `delete'
Started PUT "/positions/14/delete" for 127.0.0.1 at 2020-09-24 13:52:04 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"14"}
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 11ms (ActiveRecord: 0.6ms | Allocations: 905)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=14):
  
app/controllers/positions_controller.rb:8:in `delete'
Started PUT "/positions/16/delete" for 127.0.0.1 at 2020-09-24 13:52:05 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"16"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 3ms (ActiveRecord: 0.5ms | Allocations: 905)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=16):
  
app/controllers/positions_controller.rb:8:in `delete'
Started PUT "/positions/17/delete" for 127.0.0.1 at 2020-09-24 13:52:08 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"17"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 3ms (ActiveRecord: 0.5ms | Allocations: 905)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=17):
  
app/controllers/positions_controller.rb:8:in `delete'
Started PUT "/positions/11/delete" for 127.0.0.1 at 2020-09-24 13:52:10 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"11"}
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 3ms (ActiveRecord: 0.6ms | Allocations: 905)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=11):
  
app/controllers/positions_controller.rb:8:in `delete'
Started PUT "/positions/13/delete" for 127.0.0.1 at 2020-09-24 13:52:12 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"13"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
Completed 404 Not Found in 3ms (ActiveRecord: 0.5ms | Allocations: 905)


  
ActiveRecord::RecordNotFound (Couldn't find Position with 'id'=13):
  
app/controllers/positions_controller.rb:8:in `delete'
Started GET "/positions" for 127.0.0.1 at 2020-09-24 13:52:16 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 1364)


Started PUT "/positions/15/delete" for 127.0.0.1 at 2020-09-24 13:52:24 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"15"}
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 15]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 0], ["updated_at", "2020-09-24 10:52:24.520232"], ["id", 6]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 24ms (ActiveRecord: 5.4ms | Allocations: 7896)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 13:52:24 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 1572)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:52:29 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.9ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 6], ["quantity", 2], ["created_at", "2020-09-24 10:52:29.927584"], ["updated_at", "2020-09-24 10:52:29.927584"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:47:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:48:in `block in add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 200], ["updated_at", "2020-09-24 10:52:29.943894"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 45ms (Views: 0.1ms | ActiveRecord: 8.4ms | Allocations: 12290)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:54:08 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.8ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 74ms (ActiveRecord: 20.9ms | Allocations: 25050)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:54:54 +0300
  
SyntaxError (/home/user/hack/app/controllers/items_controller.rb:66: syntax error, unexpected `end', expecting end-of-input):
  
app/controllers/items_controller.rb:66: syntax error, unexpected `end', expecting end-of-input
app/controllers/items_controller.rb:66: syntax error, unexpected `end', expecting end-of-input
app/controllers/items_controller.rb:66: syntax error, unexpected `end', expecting end-of-input
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:55:09 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 64ms (ActiveRecord: 13.3ms | Allocations: 25097)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:55:29 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 67ms (ActiveRecord: 14.5ms | Allocations: 26853)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:55:50 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.1ms | Allocations: 4206)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:58:16 +0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 93ms (Views: 0.2ms | ActiveRecord: 21.7ms | Allocations: 27786)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:58:46 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 85ms (ActiveRecord: 22.9ms | Allocations: 25032)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:59:31 +0300
  
SyntaxError (/home/user/hack/app/controllers/items_controller.rb:66: syntax error, unexpected `end', expecting end-of-input):
  
app/controllers/items_controller.rb:66: syntax error, unexpected `end', expecting end-of-input
app/controllers/items_controller.rb:66: syntax error, unexpected `end', expecting end-of-input
app/controllers/items_controller.rb:66: syntax error, unexpected `end', expecting end-of-input
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 13:59:50 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 69ms (ActiveRecord: 17.4ms | Allocations: 25078)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:00:12 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 69ms (ActiveRecord: 16.7ms | Allocations: 26849)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:00:24 +0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 89ms (Views: 0.2ms | ActiveRecord: 18.4ms | Allocations: 27783)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:00:41 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 75ms (ActiveRecord: 18.0ms | Allocations: 25075)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:01 +0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 84ms (Views: 0.1ms | ActiveRecord: 17.8ms | Allocations: 27783)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:02 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 3513)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:03 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (1.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 3447)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:03 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 2.7ms | Allocations: 3447)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:04 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 3447)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:04 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.8ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 3431)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:05 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 3431)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:05 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 2.1ms | Allocations: 3431)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:21 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 200 OK in 67ms (Views: 0.2ms | ActiveRecord: 16.8ms | Allocations: 24304)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:01:58 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:63:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
Completed 500 Internal Server Error in 74ms (ActiveRecord: 17.9ms | Allocations: 26722)


  
NoMethodError (undefined method `position' for #<Cart:0x00007f3d0c1b4bd0>
Did you mean?  positions
               positions=):
  
app/controllers/items_controller.rb:43:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:03:29 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 4], ["updated_at", "2020-09-24 11:03:29.589675"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
Completed 500 Internal Server Error in 89ms (ActiveRecord: 19.2ms | Allocations: 31896)


  
NoMethodError (undefined method `positions' for #<Position:0x00007f3d0c40b2f8>):
  
app/controllers/items_controller.rb:52:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:04:59 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.8ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 6], ["updated_at", "2020-09-24 11:04:59.373523"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:52:in `add_item_to_cart'
Completed 200 OK in 87ms (Views: 0.7ms | ActiveRecord: 18.2ms | Allocations: 29825)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:05:24 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.8ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 8], ["updated_at", "2020-09-24 11:05:24.273895"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 800], ["updated_at", "2020-09-24 11:05:24.282703"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 85ms (Views: 0.2ms | ActiveRecord: 23.4ms | Allocations: 33019)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:05:35 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 10], ["updated_at", "2020-09-24 11:05:35.577342"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.4ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 1000], ["updated_at", "2020-09-24 11:05:35.586364"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 6.7ms | Allocations: 11055)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 14:07:34 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 1802)


Started PUT "/items/1" for 127.0.0.1 at 2020-09-24 14:08:11 +0300
Processing by ItemsController#update as */*
  Parameters: {"price"=>1000, "id"=>"1", "item"=>{"price"=>1000}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:14:in `update'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:14:in `update'
  [1m[36mItem Update (0.4ms)[0m  [1m[33mUPDATE "items" SET "price" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["price", 1000], ["updated_at", "2020-09-24 11:08:11.867398"], ["id", 1]]
  ↳ app/controllers/items_controller.rb:14:in `update'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:14:in `update'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 5394)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:08:22 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"1", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.6ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 1], ["quantity", 2], ["created_at", "2020-09-24 11:08:22.576382"], ["updated_at", "2020-09-24 11:08:22.576382"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 3000], ["updated_at", "2020-09-24 11:08:22.586398"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 39ms (Views: 0.4ms | ActiveRecord: 7.4ms | Allocations: 12603)


Started PUT "/positions/17/delete" for 127.0.0.1 at 2020-09-24 14:08:49 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"17"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 17]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 1000], ["updated_at", "2020-09-24 11:08:49.978916"], ["id", 6]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 27ms (ActiveRecord: 5.6ms | Allocations: 8392)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 14:08:49 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1658)


Started PUT "/items/1/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:08:54 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"1", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 1) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.6ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 1], ["quantity", 2], ["created_at", "2020-09-24 11:08:55.002779"], ["updated_at", "2020-09-24 11:08:55.002779"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 3000], ["updated_at", "2020-09-24 11:08:55.012447"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 37ms (Views: 0.5ms | ActiveRecord: 6.8ms | Allocations: 12382)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 14:09:22 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 1780)


Started DELETE "/items/1" for 127.0.0.1 at 2020-09-24 14:09:30 +0300
Processing by ItemsController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:22:in `destroy'
  [1m[36mItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 1]]
  ↳ app/controllers/items_controller.rb:22:in `destroy'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:22:in `destroy'
Redirected to http://localhost:3000/items
Completed 302 Found in 10ms (ActiveRecord: 2.3ms | Allocations: 2509)


Started GET "/items" for 127.0.0.1 at 2020-09-24 14:09:30 +0300
Processing by ItemsController#index as */*
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 0.6ms | Allocations: 1423)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 14:09:38 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (14.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 20ms (Views: 0.4ms | ActiveRecord: 14.4ms | Allocations: 1780)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 14:09:40 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1780)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 14:09:41 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 1781)


Started PUT "/items/2/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:28:50 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"2", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 2) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.7ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 2], ["quantity", 2], ["created_at", "2020-09-24 11:28:51.040568"], ["updated_at", "2020-09-24 11:28:51.040568"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.4ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 1000], ["updated_at", "2020-09-24 11:28:51.049306"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 76ms (ActiveRecord: 7.6ms | Allocations: 34077)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started PUT "/items/4/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:29:03 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"4", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 4) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (1.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.6ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 4], ["quantity", 2], ["created_at", "2020-09-24 11:29:03.296208"], ["updated_at", "2020-09-24 11:29:03.296208"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 46ms (ActiveRecord: 7.4ms | Allocations: 10516)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started PUT "/items/5/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:29:07 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"5", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 5) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Create (0.5ms)[0m  [1m[32mINSERT INTO "positions" ("cart_id", "item_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cart_id", 6], ["item_id", 5], ["quantity", 2], ["created_at", "2020-09-24 11:29:07.437242"], ["updated_at", "2020-09-24 11:29:07.437242"]]
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:40:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 5.7ms | Allocations: 10549)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:29:12 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (1.1ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 12], ["updated_at", "2020-09-24 11:29:12.754946"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 38ms (ActiveRecord: 6.7ms | Allocations: 9281)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started GET "/items" for 127.0.0.1 at 2020-09-24 14:29:26 +0300
Processing by ItemsController#index as */*
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 0.8ms | Allocations: 1427)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:30:46 +0300
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (1.0ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 14], ["updated_at", "2020-09-24 11:30:46.984583"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 121ms (ActiveRecord: 25.6ms | Allocations: 34579)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:31:32 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 16], ["updated_at", "2020-09-24 11:31:33.089064"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:52:in `add_item_to_cart'
Completed 200 OK in 100ms (Views: 3.3ms | ActiveRecord: 23.9ms | Allocations: 30215)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:32:26 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.8ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 18], ["updated_at", "2020-09-24 11:32:26.693740"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
Completed 500 Internal Server Error in 102ms (ActiveRecord: 21.9ms | Allocations: 31640)


  
NoMethodError (undefined method `price' for #<Position:0x00007f4b64be6ae8>):
  
app/controllers/items_controller.rb:46:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:32:37 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 20], ["updated_at", "2020-09-24 11:32:37.722453"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
Completed 200 OK in 80ms (Views: 0.3ms | ActiveRecord: 19.0ms | Allocations: 29585)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:33:08 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 22], ["updated_at", "2020-09-24 11:33:08.703920"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
Completed 200 OK in 91ms (Views: 0.6ms | ActiveRecord: 23.1ms | Allocations: 30263)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:40:22 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.8ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 24], ["updated_at", "2020-09-24 11:40:22.097081"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
Completed 200 OK in 37ms (Views: 0.5ms | ActiveRecord: 7.1ms | Allocations: 8807)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:40:41 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 26], ["updated_at", "2020-09-24 11:40:41.204092"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:46:in `add_item_to_cart'
Completed 200 OK in 74ms (Views: 0.2ms | ActiveRecord: 19.9ms | Allocations: 30182)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:41:39 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 28], ["updated_at", "2020-09-24 11:41:39.239614"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 85ms (ActiveRecord: 21.0ms | Allocations: 31704)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:42:27 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 30], ["updated_at", "2020-09-24 11:42:27.412878"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
Completed 200 OK in 74ms (Views: 0.2ms | ActiveRecord: 19.9ms | Allocations: 29662)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:42:44 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (1.1ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 32], ["updated_at", "2020-09-24 11:42:44.876296"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 98ms (Views: 0.8ms | ActiveRecord: 22.0ms | Allocations: 33290)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:42:54 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.6ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 34], ["updated_at", "2020-09-24 11:42:54.923433"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 98ms (ActiveRecord: 22.7ms | Allocations: 31740)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:43:26 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 36], ["updated_at", "2020-09-24 11:43:26.669229"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 97ms (ActiveRecord: 17.2ms | Allocations: 31732)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:43:39 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 38], ["updated_at", "2020-09-24 11:43:40.149534"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 97ms (Views: 0.5ms | ActiveRecord: 22.8ms | Allocations: 33276)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:44:09 +0300
  
SyntaxError (/home/user/hack/app/controllers/items_controller.rb:52: syntax error, unexpected `end'
    end
    ^~~
/home/user/hack/app/controllers/items_controller.rb:68: syntax error, unexpected end-of-input, expecting `end'):
  
app/controllers/items_controller.rb:52: syntax error, unexpected `end'
app/controllers/items_controller.rb:68: syntax error, unexpected end-of-input, expecting `end'
app/controllers/items_controller.rb:52: syntax error, unexpected `end'
app/controllers/items_controller.rb:68: syntax error, unexpected end-of-input, expecting `end'
app/controllers/items_controller.rb:52: syntax error, unexpected `end'
app/controllers/items_controller.rb:68: syntax error, unexpected end-of-input, expecting `end'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:44:22 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 40], ["updated_at", "2020-09-24 11:44:23.096710"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 106ms (ActiveRecord: 22.6ms | Allocations: 31773)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:45:02 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 42], ["updated_at", "2020-09-24 11:45:02.392419"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 500 Internal Server Error in 103ms (ActiveRecord: 19.1ms | Allocations: 33506)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
app/controllers/items_controller.rb:48:in `add_item_to_cart'
Started GET "/carts" for 127.0.0.1 at 2020-09-24 14:48:43 +0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for CartsController):
  
actionpack (6.0.3.3) lib/abstract_controller/base.rb:131:in `process'
actionview (6.0.3.3) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.3) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.3) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (6.0.3.3) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/carts" for 127.0.0.1 at 2020-09-24 14:48:55 +0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for CartsController):
  
actionpack (6.0.3.3) lib/abstract_controller/base.rb:131:in `process'
actionview (6.0.3.3) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.3.3) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.3.3) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (6.0.3.3) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rvm/rubies/ruby-2.7.0/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started GET "/positions" for 127.0.0.1 at 2020-09-24 14:50:39 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 9.1ms | Allocations: 5699)


Started GET "/positions" for 127.0.0.1 at 2020-09-24 14:51:29 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" IN ($1, $2, $3, $4, $5)[0m  [["id", 1], ["id", 2], ["id", 6], ["id", 4], ["id", 5]]
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 37ms (Views: 0.4ms | ActiveRecord: 9.0ms | Allocations: 13062)


Started GET "/positions" for 127.0.0.1 at 2020-09-24 14:52:07 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" IN ($1, $2, $3, $4, $5)[0m  [["id", 1], ["id", 2], ["id", 6], ["id", 4], ["id", 5]]
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 500 Internal Server Error in 43ms (ActiveRecord: 6.4ms | Allocations: 14691)


  
NoMethodError (undefined method `items' for #<Position:0x00007f4b544c6bb0>
Did you mean?  item
               item=):
  
app/controllers/positions_controller.rb:4:in `index'
Started GET "/positions" for 127.0.0.1 at 2020-09-24 14:52:30 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" IN ($1, $2, $3, $4, $5)[0m  [["id", 1], ["id", 2], ["id", 6], ["id", 4], ["id", 5]]
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 33ms (Views: 2.1ms | ActiveRecord: 7.5ms | Allocations: 13388)


Started PUT "/positions/1/delete" for 127.0.0.1 at 2020-09-24 14:54:39 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"1"}
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.5ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 1]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
Completed 500 Internal Server Error in 56ms (ActiveRecord: 8.8ms | Allocations: 13530)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/positions_controller.rb:14:in `block in delete'
app/controllers/positions_controller.rb:13:in `delete'
Started PUT "/positions/2/delete" for 127.0.0.1 at 2020-09-24 14:54:45 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"2"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 2]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 3.8ms | Allocations: 5226)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/controllers/positions_controller.rb:14:in `block in delete'
app/controllers/positions_controller.rb:13:in `delete'
Started PUT "/positions/3/delete" for 127.0.0.1 at 2020-09-24 14:54:47 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"3"}
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 3]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 0], ["updated_at", "2020-09-24 11:54:47.652234"], ["id", 1]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Redirected to http://localhost:3000/carts/1
Completed 302 Found in 53ms (ActiveRecord: 9.8ms | Allocations: 15812)


Started GET "/carts/1" for 127.0.0.1 at 2020-09-24 14:54:47 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 1]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1572)


Started GET "/positions" for 127.0.0.1 at 2020-09-24 14:54:52 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" IN ($1, $2, $3, $4, $5)[0m  [["id", 1], ["id", 2], ["id", 6], ["id", 4], ["id", 5]]
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 1.1ms | Allocations: 3291)


Started PUT "/positions/4/delete" for 127.0.0.1 at 2020-09-24 14:54:59 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"4"}
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 3.8ms | Allocations: 5233)


  
NoMethodError (undefined method `*' for nil:NilClass):
  
app/controllers/positions_controller.rb:14:in `block in delete'
app/controllers/positions_controller.rb:13:in `delete'
Started PUT "/positions/5/delete" for 127.0.0.1 at 2020-09-24 14:55:00 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"5"}
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.7ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 5]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 0], ["updated_at", "2020-09-24 11:55:00.402600"], ["id", 2]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Redirected to http://localhost:3000/carts/2
Completed 302 Found in 30ms (ActiveRecord: 5.5ms | Allocations: 7285)


Started GET "/carts/2" for 127.0.0.1 at 2020-09-24 14:55:00 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 2]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1537)


Started PUT "/positions/18/delete" for 127.0.0.1 at 2020-09-24 14:55:03 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"18"}
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 18]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 3.7ms | Allocations: 6000)


  
NoMethodError (undefined method `*' for nil:NilClass):
  
app/controllers/positions_controller.rb:14:in `block in delete'
app/controllers/positions_controller.rb:13:in `delete'
Started PUT "/positions/19/delete" for 127.0.0.1 at 2020-09-24 14:55:06 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"19"}
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.6ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 19]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 3.9ms | Allocations: 5983)


  
NoMethodError (undefined method `*' for nil:NilClass):
  
app/controllers/positions_controller.rb:14:in `block in delete'
app/controllers/positions_controller.rb:13:in `delete'
Started PUT "/positions/20/delete" for 127.0.0.1 at 2020-09-24 14:55:08 +0300
Processing by PositionsController#delete as */*
  Parameters: {"id"=>"20"}
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:8:in `delete'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:9:in `delete'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Destroy (0.4ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 20]]
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:10:in `delete'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/positions_controller.rb:13:in `delete'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:14:in `block in delete'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[36mCart Update (0.4ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 4230], ["updated_at", "2020-09-24 11:55:08.220257"], ["id", 6]]
  ↳ app/controllers/positions_controller.rb:17:in `delete'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/positions_controller.rb:17:in `delete'
Redirected to http://localhost:3000/carts/6
Completed 302 Found in 27ms (ActiveRecord: 5.2ms | Allocations: 8797)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 14:55:08 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 1780)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:57:10 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 44], ["updated_at", "2020-09-24 11:57:11.016237"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 58ms (Views: 0.5ms | ActiveRecord: 13.2ms | Allocations: 32920)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:57:49 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 46], ["updated_at", "2020-09-24 11:57:49.908106"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.1ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 9265)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:58:26 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 48], ["updated_at", "2020-09-24 11:58:27.081696"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 56ms (Views: 0.3ms | ActiveRecord: 12.8ms | Allocations: 32876)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:58:32 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 50], ["updated_at", "2020-09-24 11:58:32.069430"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.7ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 6.8ms | Allocations: 9265)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:58:47 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (1.1ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 52], ["updated_at", "2020-09-24 11:58:47.347960"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 25ms (Views: 0.4ms | ActiveRecord: 5.5ms | Allocations: 9263)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:58:58 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>2, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 54], ["updated_at", "2020-09-24 11:58:58.991628"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 80ms (Views: 0.3ms | ActiveRecord: 13.2ms | Allocations: 32893)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 14:59:04 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>4, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:65:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 58], ["updated_at", "2020-09-24 11:59:04.540136"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 4.2ms | Allocations: 9265)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 15:02:08 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>4, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 62], ["updated_at", "2020-09-24 12:02:08.368671"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.4ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 6200], ["updated_at", "2020-09-24 12:02:08.374318"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.3ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 6230], ["updated_at", "2020-09-24 12:02:08.379334"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 77ms (Views: 0.2ms | ActiveRecord: 17.3ms | Allocations: 39877)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 15:02:20 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>4, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 66], ["updated_at", "2020-09-24 12:02:20.320082"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 6600], ["updated_at", "2020-09-24 12:02:20.324405"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.3ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 6630], ["updated_at", "2020-09-24 12:02:20.330009"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 5.9ms | Allocations: 14324)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 15:02:21 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>4, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 70], ["updated_at", "2020-09-24 12:02:21.200544"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.3ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 7000], ["updated_at", "2020-09-24 12:02:21.204936"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 7030], ["updated_at", "2020-09-24 12:02:21.210245"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 7.2ms | Allocations: 14323)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 15:02:22 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>4, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.4ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 74], ["updated_at", "2020-09-24 12:02:22.321650"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.5ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 7400], ["updated_at", "2020-09-24 12:02:22.333884"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 7430], ["updated_at", "2020-09-24 12:02:22.343074"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 52ms (Views: 0.3ms | ActiveRecord: 14.0ms | Allocations: 14323)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 15:02:23 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>4, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.3ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 78], ["updated_at", "2020-09-24 12:02:23.747830"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.3ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 7800], ["updated_at", "2020-09-24 12:02:23.753426"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 7830], ["updated_at", "2020-09-24 12:02:23.758247"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 30ms (Views: 0.3ms | ActiveRecord: 7.2ms | Allocations: 14323)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 15:02:26 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>4, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.6ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.7ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 82], ["updated_at", "2020-09-24 12:02:26.304145"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 8200], ["updated_at", "2020-09-24 12:02:26.312779"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.3ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 8230], ["updated_at", "2020-09-24 12:02:26.319784"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 8.2ms | Allocations: 14302)


Started PUT "/items/6/add_item_to_cart" for 127.0.0.1 at 2020-09-24 15:02:31 +0300
Processing by ItemsController#add_item_to_cart as */*
  Parameters: {"user_id"=>13, "quantity"=>1, "id"=>"6", "item"=>{"user_id"=>13}}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:36:in `add_item_to_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 LIMIT $2[0m  [["user_id", 13], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:37:in `add_item_to_cart'
  [1m[36mPosition Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id = 6) LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:39:in `add_item_to_cart'
  [1m[36mPosition Load (0.5ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1 AND (item_id =6) ORDER BY "positions"."id" ASC LIMIT $2[0m  [["cart_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:42:in `add_item_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Update (0.5ms)[0m  [1m[33mUPDATE "positions" SET "quantity" = $1, "updated_at" = $2 WHERE "positions"."id" = $3[0m  [["quantity", 83], ["updated_at", "2020-09-24 12:02:31.836595"], ["id", 16]]
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:44:in `add_item_to_cart'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/items_controller.rb:48:in `add_item_to_cart'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.4ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 8300], ["updated_at", "2020-09-24 12:02:31.844783"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:49:in `block in add_item_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[36mCart Update (0.3ms)[0m  [1m[33mUPDATE "carts" SET "fullPrice" = $1, "updated_at" = $2 WHERE "carts"."id" = $3[0m  [["fullPrice", 8330], ["updated_at", "2020-09-24 12:02:31.851164"], ["id", 6]]
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:50:in `block in add_item_to_cart'
Completed 200 OK in 47ms (Views: 0.3ms | ActiveRecord: 7.2ms | Allocations: 14305)


Started DELETE "/items/6" for 127.0.0.1 at 2020-09-24 15:03:20 +0300
Processing by ItemsController#destroy as */*
  Parameters: {"id"=>"6"}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:64:in `find_item'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:22:in `destroy'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."item_id" = $1[0m  [["item_id", 6]]
  ↳ app/controllers/items_controller.rb:22:in `destroy'
  [1m[36mPosition Destroy (0.4ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 16]]
  ↳ app/controllers/items_controller.rb:22:in `destroy'
  [1m[36mItem Destroy (14.3ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 6]]
  ↳ app/controllers/items_controller.rb:22:in `destroy'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:22:in `destroy'
Redirected to http://localhost:3000/items
Completed 302 Found in 27ms (ActiveRecord: 16.2ms | Allocations: 5292)


Started GET "/items" for 127.0.0.1 at 2020-09-24 15:03:20 +0300
Processing by ItemsController#index as */*
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:6:in `index'
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.4ms | Allocations: 1289)


Started GET "/positions" for 127.0.0.1 at 2020-09-24 15:03:44 +0300
Processing by PositionsController#index as */*
  [1m[36mPosition Load (0.4ms)[0m  [1m[34mSELECT "positions".* FROM "positions"[0m
  ↳ app/controllers/positions_controller.rb:4:in `index'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1[0m  [["id", 5]]
  ↳ app/controllers/positions_controller.rb:4:in `index'
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 2401)


Started GET "/carts/6" for 127.0.0.1 at 2020-09-24 15:46:03 +0300
Processing by CartsController#show as */*
  Parameters: {"id"=>"6"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/carts_controller.rb:19:in `find_cart'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."cart_id" = $1[0m  [["cart_id", 6]]
  ↳ app/controllers/carts_controller.rb:5:in `show'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1924)


Started GET "/items" for 127.0.0.1 at 2020-09-24 15:55:15 +0300
Processing by ItemsController#index as */*
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/items_controller.rb:7:in `index'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 6896)


Started DELETE "/items/4" for 127.0.0.1 at 2020-09-24 15:55:31 +0300
Processing by ItemsController#destroy as */*
  Parameters: {"id"=>"4"}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:68:in `find_item'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[36mPosition Load (0.3ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."item_id" = $1[0m  [["item_id", 4]]
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[36mItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[36mCart Load (2.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE (item_id =4)[0m
  ↳ app/controllers/items_controller.rb:25:in `destroy'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 5.1ms | Allocations: 7684)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ОШИБКА:  столбец "item_id" не существует
LINE 1: SELECT "carts".* FROM "carts" WHERE (item_id =4)
                                             ^
HINT:  Возможно, предполагалась ссылка на столбец "carts.user_id".
):
  
app/controllers/items_controller.rb:25:in `destroy'
Started DELETE "/items/4" for 127.0.0.1 at 2020-09-24 15:57:08 +0300
Processing by ItemsController#destroy as */*
  Parameters: {"id"=>"4"}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:71:in `find_item'
Completed 404 Not Found in 9ms (ActiveRecord: 4.9ms | Allocations: 2943)


  
ActiveRecord::RecordNotFound (Couldn't find Item with 'id'=4):
  
app/controllers/items_controller.rb:71:in `find_item'
Started DELETE "/items/5" for 127.0.0.1 at 2020-09-24 15:57:22 +0300
Processing by ItemsController#destroy as */*
  Parameters: {"id"=>"5"}
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:71:in `find_item'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[36mPosition Load (0.2ms)[0m  [1m[34mSELECT "positions".* FROM "positions" WHERE "positions"."item_id" = $1[0m  [["item_id", 5]]
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[36mPosition Destroy (0.4ms)[0m  [1m[31mDELETE FROM "positions" WHERE "positions"."id" = $1[0m  [["id", 21]]
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[36mItem Destroy (0.3ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 5]]
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/items_controller.rb:24:in `destroy'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE (item_id =5)[0m
  ↳ app/controllers/items_controller.rb:25:in `destroy'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 5.0ms | Allocations: 15798)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ОШИБКА:  столбец "item_id" не существует
LINE 1: SELECT "carts".* FROM "carts" WHERE (item_id =5)
                                             ^
HINT:  Возможно, предполагалась ссылка на столбец "carts.user_id".
):
  
app/controllers/items_controller.rb:25:in `destroy'
Started DELETE "/items/5" for 127.0.0.1 at 2020-09-24 15:59:26 +0300
Processing by ItemsController#destroy as */*
  Parameters: {"id"=>"5"}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:71:in `find_item'
Completed 404 Not Found in 6ms (ActiveRecord: 2.7ms | Allocations: 2920)


  
ActiveRecord::RecordNotFound (Couldn't find Item with 'id'=5):
  
app/controllers/items_controller.rb:71:in `find_item'
Started DELETE "/items/2" for 127.0.0.1 at 2020-09-24 15:59:30 +0300
Processing by ItemsController#destroy as */*
  Parameters: {"id"=>"2"}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:71:in `find_item'
  [1m[36mCart Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "carts" WHERE (item_id =2) LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/items_controller.rb:23:in `destroy'
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.8ms | Allocations: 7373)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ОШИБКА:  столбец "item_id" не существует
LINE 1: SELECT 1 AS one FROM "carts" WHERE (item_id =2) LIMIT $1
                                            ^
HINT:  Возможно, предполагалась ссылка на столбец "carts.user_id".
):
  
app/controllers/items_controller.rb:23:in `destroy'
Started GET "/api/users" for 127.0.0.1 at 2020-09-25 14:29:15 +0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
Zeitwerk::NameError (expected file /home/user/hack/app/controllers/api/users_controller.rb to define constant Api::UsersController, but didn't):
  
zeitwerk (2.4.0) lib/zeitwerk/loader/callbacks.rb:17:in `on_file_autoloaded'
zeitwerk (2.4.0) lib/zeitwerk/kernel.rb:28:in `block in require'
zeitwerk (2.4.0) lib/zeitwerk/kernel.rb:27:in `tap'
zeitwerk (2.4.0) lib/zeitwerk/kernel.rb:27:in `require'
activesupport (6.0.3.3) lib/active_support/inflector/methods.rb:284:in `const_get'
activesupport (6.0.3.3) lib/active_support/inflector/methods.rb:284:in `block in constantize'
activesupport (6.0.3.3) lib/active_support/inflector/methods.rb:280:in `each'
activesupport (6.0.3.3) lib/active_support/inflector/methods.rb:280:in `inject'
activesupport (6.0.3.3) lib/active_support/inflector/methods.rb:280:in `constantize'
activesupport (6.0.3.3) lib/active_support/dependencies/zeitwerk_integration.rb:19:in `constantize'
actionpack (6.0.3.3) lib/action_dispatch/http/request.rb:89:in `controller_class_for'
actionpack (6.0.3.3) lib/action_dispatch/http/parameters.rb:100:in `binary_params_for?'
actionpack (6.0.3.3) lib/action_dispatch/http/parameters.rb:91:in `set_binary_encoding'
actionpack (6.0.3.3) lib/action_dispatch/http/parameters.rb:69:in `path_parameters='
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:47:in `block in serve'
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.3.3) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.3.3) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (6.0.3.3) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/users" for 127.0.0.1 at 2020-09-25 14:31:32 +0300
Processing by Api::UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6], ["user_id", 7], ["user_id", 8], ["user_id", 9], ["user_id", 10], ["user_id", 11], ["user_id", 12], ["user_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
Completed 200 OK in 35ms (Views: 1.1ms | ActiveRecord: 6.4ms | Allocations: 21245)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateComments (20200925114901)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "body" text, "user_id" integer, "commentable_id" integer, "commentable_type" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925114901"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" ORDER BY "items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mComment Create (0.7ms)[0m  [1m[32mINSERT INTO "comments" ("body", "user_id", "commentable_id", "commentable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["body", "item cpmment"], ["user_id", 13], ["commentable_id", 3], ["commentable_type", "Item"], ["created_at", "2020-09-25 12:00:23.945310"], ["updated_at", "2020-09-25 12:00:23.945310"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mComment Load (0.3ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_id" = $1 AND "comments"."commentable_type" = $2 LIMIT $3[0m  [["commentable_id", 3], ["commentable_type", "Item"], ["LIMIT", 11]]
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_id" = $1 AND "comments"."commentable_type" = $2 LIMIT $3[0m  [["commentable_id", 3], ["commentable_type", "Item"], ["LIMIT", 11]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mComment Create (0.9ms)[0m  [1m[32mINSERT INTO "comments" ("body", "user_id", "commentable_id", "commentable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["body", "user comment"], ["user_id", 13], ["commentable_id", 1], ["commentable_type", "User"], ["created_at", "2020-09-25 12:03:02.749772"], ["updated_at", "2020-09-25 12:03:02.749772"]]
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mComment Load (1.0ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_id" = $1 AND "comments"."commentable_type" = $2 LIMIT $3[0m  [["commentable_id", 1], ["commentable_type", "User"], ["LIMIT", 11]]
  [1m[36mComment Load (0.9ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_id" = $1 AND "comments"."commentable_type" = $2 LIMIT $3[0m  [["commentable_id", 1], ["commentable_type", "User"], ["LIMIT", 11]]
Started GET "/api/users" for 127.0.0.1 at 2020-09-25 15:28:01 +0300
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mComment Load (0.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_type" = $1 AND "comments"."commentable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14)[0m  [["commentable_type", "User"], ["commentable_id", 1], ["commentable_id", 2], ["commentable_id", 3], ["commentable_id", 4], ["commentable_id", 5], ["commentable_id", 6], ["commentable_id", 7], ["commentable_id", 8], ["commentable_id", 9], ["commentable_id", 10], ["commentable_id", 11], ["commentable_id", 12], ["commentable_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
Completed 200 OK in 26ms (Views: 0.7ms | ActiveRecord: 3.9ms | Allocations: 18350)


Started GET "/api/users" for 127.0.0.1 at 2020-09-25 15:30:31 +0300
Processing by Api::UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mComment Load (0.2ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_type" = $1 AND "comments"."commentable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14)[0m  [["commentable_type", "User"], ["commentable_id", 1], ["commentable_id", 2], ["commentable_id", 3], ["commentable_id", 4], ["commentable_id", 5], ["commentable_id", 6], ["commentable_id", 7], ["commentable_id", 8], ["commentable_id", 9], ["commentable_id", 10], ["commentable_id", 11], ["commentable_id", 12], ["commentable_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6], ["user_id", 7], ["user_id", 8], ["user_id", 9], ["user_id", 10], ["user_id", 11], ["user_id", 12], ["user_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
Completed 200 OK in 39ms (Views: 0.9ms | ActiveRecord: 8.3ms | Allocations: 24845)


Started GET "/api/users" for 127.0.0.1 at 2020-09-25 15:31:06 +0300
Processing by Api::UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mComment Load (0.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_type" = $1 AND "comments"."commentable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14)[0m  [["commentable_type", "User"], ["commentable_id", 1], ["commentable_id", 2], ["commentable_id", 3], ["commentable_id", 4], ["commentable_id", 5], ["commentable_id", 6], ["commentable_id", 7], ["commentable_id", 8], ["commentable_id", 9], ["commentable_id", 10], ["commentable_id", 11], ["commentable_id", 12], ["commentable_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6], ["user_id", 7], ["user_id", 8], ["user_id", 9], ["user_id", 10], ["user_id", 11], ["user_id", 12], ["user_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
Completed 200 OK in 12ms (Views: 1.2ms | ActiveRecord: 1.6ms | Allocations: 7236)


Started GET "/api/users" for 127.0.0.1 at 2020-09-25 16:35:35 +0300
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

):
  
activerecord (6.0.3.3) lib/active_record/migration.rb:586:in `check_pending!'
activerecord (6.0.3.3) lib/active_record/migration.rb:564:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateLikes (20200925133005)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "likes" ("id" bigserial primary key, "state" boolean, "user_id" integer, "commentable_id" integer, "commentable_type" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925133005"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/users" for 127.0.0.1 at 2020-09-25 16:37:13 +0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mComment Load (0.6ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_type" = $1 AND "comments"."commentable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14)[0m  [["commentable_type", "User"], ["commentable_id", 1], ["commentable_id", 2], ["commentable_id", 3], ["commentable_id", 4], ["commentable_id", 5], ["commentable_id", 6], ["commentable_id", 7], ["commentable_id", 8], ["commentable_id", 9], ["commentable_id", 10], ["commentable_id", 11], ["commentable_id", 12], ["commentable_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6], ["user_id", 7], ["user_id", 8], ["user_id", 9], ["user_id", 10], ["user_id", 11], ["user_id", 12], ["user_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 2]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 3]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 4]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 5]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 6]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 7]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 8]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 9]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 10]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 11]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 12]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."user_id" = $1[0m  [["user_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
Completed 200 OK in 71ms (Views: 0.9ms | ActiveRecord: 14.8ms | Allocations: 42396)


Started GET "/items/" for 127.0.0.1 at 2020-09-25 16:37:49 +0300
  
ActionController::RoutingError (No route matches [GET] "/items"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/api/items/" for 127.0.0.1 at 2020-09-25 16:38:11 +0300
Processing by Api::ItemsController#index as */*
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (name LIKE '%%')[0m
  ↳ app/controllers/api/items_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1054)


Started GET "/api/comments" for 127.0.0.1 at 2020-09-25 16:46:39 +0300
Processing by Api::CommentsController#index as */*
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 772)


Started GET "/api/comments" for 127.0.0.1 at 2020-09-25 16:47:22 +0300
Processing by Api::CommentsController#index as */*
  [1m[36mComment Load (0.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments"[0m
  ↳ app/controllers/api/comments_controller.rb:6:in `index'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 4.3ms | Allocations: 5553)


Started POST "/api/comments" for 127.0.0.1 at 2020-09-25 16:48:43 +0300
Processing by Api::CommentsController#create as */*
  Parameters: {"body"=>"postman comment", "user_id"=>13, "commentable_id"=>1, "commentable_type"=>"User", "comment"=>{"body"=>"postman comment", "user_id"=>13, "commentable_id"=>1, "commentable_type"=>"User"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/comments_controller.rb:11:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/comments_controller.rb:11:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/comments_controller.rb:11:in `create'
  [1m[36mComment Create (0.8ms)[0m  [1m[32mINSERT INTO "comments" ("body", "user_id", "commentable_id", "commentable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["body", "postman comment"], ["user_id", 13], ["commentable_id", 1], ["commentable_type", "User"], ["created_at", "2020-09-25 13:48:43.681947"], ["updated_at", "2020-09-25 13:48:43.681947"]]
  ↳ app/controllers/api/comments_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/comments_controller.rb:11:in `create'
Completed 200 OK in 28ms (Views: 0.1ms | ActiveRecord: 4.7ms | Allocations: 16782)


Started GET "/api/comments" for 127.0.0.1 at 2020-09-25 16:48:48 +0300
Processing by Api::CommentsController#index as */*
  Parameters: {"body"=>"postman comment", "user_id"=>13, "commentable_id"=>1, "commentable_type"=>"User", "comment"=>{"body"=>"postman comment", "user_id"=>13, "commentable_id"=>1, "commentable_type"=>"User"}}
  [1m[36mComment Load (0.5ms)[0m  [1m[34mSELECT "comments".* FROM "comments"[0m
  ↳ app/controllers/api/comments_controller.rb:6:in `index'
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 1075)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddVotesCountToUser (20200925135109)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "votesCount" integer[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925135109"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVotesCountToItem (20200925135115)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "items" ADD "votesCount" integer[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925135115"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddVotesCountToItem (20200925135115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "items" DROP COLUMN "votesCount"[0m
  [1m[36mprimary::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200925135115"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddVotesCountToUser (20200925135109)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "votesCount"[0m
  [1m[36mprimary::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200925135109"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddVotesCountToUser (20200925135109)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mALTER TABLE "users" ADD "votesCount" integer DEFAULT 0[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925135109"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVotesCountToItem (20200925135115)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "items" ADD "votesCount" integer DEFAULT 0[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925135115"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/items/1" for 127.0.0.1 at 2020-09-25 17:14:26 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::ItemsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/items_controller.rb:78:in `find_item'
Completed 404 Not Found in 8ms (ActiveRecord: 4.0ms | Allocations: 3615)


  
ActiveRecord::RecordNotFound (Couldn't find Item with 'id'=1):
  
app/controllers/api/items_controller.rb:78:in `find_item'
Started GET "/api/items/2" for 127.0.0.1 at 2020-09-25 17:14:30 +0300
Processing by Api::ItemsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/items_controller.rb:78:in `find_item'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.4ms | Allocations: 7606)


  
NoMethodError (undefined method `type' for #<Item:0x00007f8c383f30d8>):
  
app/controllers/api/items_controller.rb:11:in `show'
Started GET "/api/items/2" for 127.0.0.1 at 2020-09-25 17:20:13 +0300
Processing by Api::ItemsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/items_controller.rb:78:in `find_item'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 3.4ms | Allocations: 27849)


  
SystemStackError (stack level too deep):
  
app/controllers/api/items_controller.rb:12:in `show'
Started GET "/api/items/2" for 127.0.0.1 at 2020-09-25 17:20:27 +0300
Processing by Api::ItemsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/items_controller.rb:78:in `find_item'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 7477)


Started GET "/api/items/2" for 127.0.0.1 at 2020-09-25 17:20:55 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::ItemsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/items_controller.rb:78:in `find_item'
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 4.2ms | Allocations: 9055)


Started GET "/api/likes" for 127.0.0.1 at 2020-09-25 17:50:31 +0300
Processing by Api::LikesController#index as */*
  [1m[36mLike Load (0.7ms)[0m  [1m[34mSELECT "likes".* FROM "likes"[0m
  ↳ app/controllers/api/likes_controller.rb:6:in `index'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.8ms | Allocations: 1609)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 17:51:18 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "commentable_id"=>1, "commentable_type"=>"User", "like"=>{"user_id"=>13, "commentable_id"=>1, "commentable_type"=>"User"}}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 357)


  
ActionController::ParameterMissing (param is missing or the value is empty: comment):
  
app/controllers/api/likes_controller.rb:28:in `comment_params'
app/controllers/api/likes_controller.rb:10:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddVotesCountToItem (20200925135115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "items" DROP COLUMN "votesCount"[0m
  [1m[36mprimary::SchemaMigration Destroy (0.7ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200925135115"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddVotesCountToUser (20200925135109)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "votesCount"[0m
  [1m[36mprimary::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200925135109"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateLikes (20200925133005)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "likes"[0m
  [1m[36mprimary::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200925133005"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateLikes (20200925133005)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "likes" ("id" bigserial primary key, "state" boolean, "user_id" integer, "likeable_id" integer, "likeable_type" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925133005"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVotesCountToUser (20200925135109)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "users" ADD "votesCount" integer DEFAULT 0[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925135109"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVotesCountToItem (20200925135115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.7ms)[0m  [1m[35mALTER TABLE "items" ADD "votesCount" integer DEFAULT 0[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200925135115"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4205663528824196565)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 17:54:50 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
Completed 400 Bad Request in 0ms (ActiveRecord: 1.7ms | Allocations: 377)


  
ActionController::ParameterMissing (param is missing or the value is empty: comment):
  
app/controllers/api/likes_controller.rb:28:in `comment_params'
app/controllers/api/likes_controller.rb:10:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 17:56:52 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[36mLike Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" = $1 AND "likes"."commentable_type" = $2 AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $3[0m  [["commentable_id", 13], ["commentable_type", "User"], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 7.4ms | Allocations: 17019)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ОШИБКА:  столбец likes.commentable_id не существует
LINE 1: SELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" ...
                                           ^
):
  
app/controllers/api/likes_controller.rb:13:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 17:57:41 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[36mLike Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" = $1 AND "likes"."commentable_type" = $2 AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $3[0m  [["commentable_id", 13], ["commentable_type", "User"], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.3ms | Allocations: 2298)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ОШИБКА:  столбец likes.commentable_id не существует
LINE 1: SELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" ...
                                           ^
):
  
app/controllers/api/likes_controller.rb:13:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 17:58:46 +0300
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[36mLike Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" = $1 AND "likes"."commentable_type" = $2 AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $3[0m  [["commentable_id", 13], ["commentable_type", "User"], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:12:in `create'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 7.6ms | Allocations: 17807)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ОШИБКА:  столбец likes.commentable_id не существует
LINE 1: SELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" ...
                                           ^
):
  
app/controllers/api/likes_controller.rb:12:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:04:43 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[36mLike Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" = $1 AND "likes"."commentable_type" = $2 AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $3[0m  [["commentable_id", 13], ["commentable_type", "User"], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:12:in `create'
Completed 500 Internal Server Error in 54ms (ActiveRecord: 8.0ms | Allocations: 17825)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ОШИБКА:  столбец likes.commentable_id не существует
LINE 1: SELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" ...
                                           ^
):
  
app/controllers/api/likes_controller.rb:12:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:05:10 +0300
Processing by Api::LikesController#create as */*
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 393)


  
ActionController::ParameterMissing (param is missing or the value is empty: like):
  
app/controllers/api/likes_controller.rb:27:in `like_params'
app/controllers/api/likes_controller.rb:10:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:05:22 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[36mLike Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" = $1 AND "likes"."commentable_type" = $2 AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $3[0m  [["commentable_id", 13], ["commentable_type", "User"], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:12:in `create'
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.9ms | Allocations: 2299)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ОШИБКА:  столбец likes.commentable_id не существует
LINE 1: SELECT 1 AS one FROM "likes" WHERE "likes"."commentable_id" ...
                                           ^
):
  
app/controllers/api/likes_controller.rb:12:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:07:06 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[36mLike Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2 AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $3[0m  [["likeable_id", 13], ["likeable_type", "User"], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:12:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
  [1m[36mLike Create (0.7ms)[0m  [1m[32mINSERT INTO "likes" ("state", "user_id", "likeable_id", "likeable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["state", true], ["user_id", 13], ["likeable_id", 1], ["likeable_type", "User"], ["created_at", "2020-09-25 15:07:06.836305"], ["updated_at", "2020-09-25 15:07:06.836305"]]
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 8.6ms | Allocations: 20191)


Started GET "/api/likes" for 127.0.0.1 at 2020-09-25 18:07:17 +0300
Processing by Api::LikesController#index as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.4ms)[0m  [1m[34mSELECT "likes".* FROM "likes"[0m
  ↳ app/controllers/api/likes_controller.rb:6:in `index'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 837)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:07:20 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[36mLike Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2 AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $3[0m  [["likeable_id", 13], ["likeable_type", "User"], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:12:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
  [1m[36mLike Create (0.4ms)[0m  [1m[32mINSERT INTO "likes" ("state", "user_id", "likeable_id", "likeable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["state", true], ["user_id", 13], ["likeable_id", 1], ["likeable_type", "User"], ["created_at", "2020-09-25 15:07:20.663065"], ["updated_at", "2020-09-25 15:07:20.663065"]]
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/likes_controller.rb:14:in `create'
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 2.7ms | Allocations: 6274)


Started GET "/api/likes" for 127.0.0.1 at 2020-09-25 18:07:26 +0300
Processing by Api::LikesController#index as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.3ms)[0m  [1m[34mSELECT "likes".* FROM "likes"[0m
  ↳ app/controllers/api/likes_controller.rb:6:in `index'
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 927)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:08:06 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[36mLike Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2 AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $3[0m  [["likeable_id", 13], ["likeable_type", "User"], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:12:in `create'
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 6.3ms | Allocations: 14149)


Started GET "/api/likes" for 127.0.0.1 at 2020-09-25 18:08:10 +0300
Processing by Api::LikesController#index as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.5ms)[0m  [1m[34mSELECT "likes".* FROM "likes"[0m
  ↳ app/controllers/api/likes_controller.rb:6:in `index'
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 935)


Started GET "/api/users" for 127.0.0.1 at 2020-09-25 18:11:27 +0300
Processing by Api::UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mComment Load (0.4ms)[0m  [1m[34mSELECT "comments".* FROM "comments" WHERE "comments"."commentable_type" = $1 AND "comments"."commentable_id" IN ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14)[0m  [["commentable_type", "User"], ["commentable_id", 1], ["commentable_id", 2], ["commentable_id", 3], ["commentable_id", 4], ["commentable_id", 5], ["commentable_id", 6], ["commentable_id", 7], ["commentable_id", 8], ["commentable_id", 9], ["commentable_id", 10], ["commentable_id", 11], ["commentable_id", 12], ["commentable_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)[0m  [["user_id", 1], ["user_id", 2], ["user_id", 3], ["user_id", 4], ["user_id", 5], ["user_id", 6], ["user_id", 7], ["user_id", 8], ["user_id", 9], ["user_id", 10], ["user_id", 11], ["user_id", 12], ["user_id", 13]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 1], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.3ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 2], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.3ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 3], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 4], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 5], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 6], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.1ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 7], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 8], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 9], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 10], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 11], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 12], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE "likes"."likeable_id" = $1 AND "likes"."likeable_type" = $2[0m  [["likeable_id", 13], ["likeable_type", "User"]]
  ↳ app/controllers/api/users_controller.rb:6:in `index'
Completed 200 OK in 73ms (Views: 0.9ms | ActiveRecord: 15.7ms | Allocations: 42424)


Started GET "/api/likes" for 127.0.0.1 at 2020-09-25 18:13:18 +0300
Processing by Api::LikesController#index as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.2ms)[0m  [1m[34mSELECT "likes".* FROM "likes"[0m
  ↳ app/controllers/api/likes_controller.rb:6:in `index'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 4264)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:13:22 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE (user_id = 13) AND (likeable_type LIKE User) AND (likeable_id = 1) LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mLike Create (0.3ms)[0m  [1m[32mINSERT INTO "likes" ("state", "user_id", "likeable_id", "likeable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["state", true], ["user_id", 13], ["likeable_id", 1], ["likeable_type", "User"], ["created_at", "2020-09-25 15:13:22.516433"], ["updated_at", "2020-09-25 15:13:22.516433"]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 6.0ms | Allocations: 15339)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:14:42 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.4ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (user_id = 13) AND (likeable_type LIKE User) AND (likeable_id = 1)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 4217)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:15:04 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.4ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (user_id = 13)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 4552)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:15:38 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.4ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (user_id = 13) AND (likeable_id = 1)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 4568)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:16:08 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.3ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (user_id = 13) AND (likeable_type LIKE User)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 4210)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:16:31 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.4ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (user_id = 13)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 4552)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:17:53 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.3ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (likeable_type LIKE User)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 4167)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:18:10 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 3504)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:18:53 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
Completed 500 Internal Server Error in 58ms (ActiveRecord: 2.8ms | Allocations: 44715)


  
NoMethodError (undefined method `where' for #<Api::LikesController:0x00007f4ff099df80>
Did you mean?  when):
  
app/controllers/api/likes_controller.rb:11:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:19:07 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.5ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (likeable_type = User)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 4197)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:19:38 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.3ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (likeable_type = User)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.8ms | Allocations: 4150)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:21:05 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.7ms | Allocations: 6694)


  
NoMethodError (undefined method `call' for #<Class:0x00007f4fec064ff8>
Did you mean?  all):
  
app/controllers/api/likes_controller.rb:11:in `create'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:21:28 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.4ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (likeable_type LIKE '%User%')[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 4568)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:22:08 +0300
  
SyntaxError (/home/user/hack/app/controllers/api/likes_controller.rb:16: syntax error, unexpected local variable or method, expecting ')'
      render json: @like2.as_json
      ^~~~~~
):
  
app/controllers/api/likes_controller.rb:16: syntax error, unexpected local variable or method, expecting ')'
app/controllers/api/likes_controller.rb:16: syntax error, unexpected local variable or method, expecting ')'
app/controllers/api/likes_controller.rb:16: syntax error, unexpected local variable or method, expecting ')'
Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:23:16 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Load (0.4ms)[0m  [1m[34mSELECT "likes".* FROM "likes" WHERE (user_id = 13) AND (likeable_type LIKE '%User%') AND (likeable_id = 1)[0m
  ↳ app/controllers/api/likes_controller.rb:16:in `create'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 4645)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:23:58 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>1, "likeable_type"=>"User"}}
  [1m[36mLike Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE (user_id = 13) AND (likeable_type LIKE '%User%') AND (likeable_id = 1) LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 4320)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:24:06 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>2, "likeable_type"=>"User", "like"=>{"user_id"=>13, "likeable_id"=>2, "likeable_type"=>"User"}}
  [1m[36mLike Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE (user_id = 13) AND (likeable_type LIKE '%User%') AND (likeable_id = 2) LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mLike Create (0.6ms)[0m  [1m[32mINSERT INTO "likes" ("state", "user_id", "likeable_id", "likeable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["state", true], ["user_id", 13], ["likeable_id", 2], ["likeable_type", "User"], ["created_at", "2020-09-25 15:24:06.669694"], ["updated_at", "2020-09-25 15:24:06.669694"]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 5.2ms | Allocations: 15318)


Started POST "/api/likes" for 127.0.0.1 at 2020-09-25 18:24:24 +0300
Processing by Api::LikesController#create as */*
  Parameters: {"user_id"=>13, "likeable_id"=>2, "likeable_type"=>"Item", "like"=>{"user_id"=>13, "likeable_id"=>2, "likeable_type"=>"Item"}}
  [1m[36mLike Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "likes" WHERE (user_id = 13) AND (likeable_type LIKE '%Item%') AND (likeable_id = 2) LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[36mLike Create (0.4ms)[0m  [1m[32mINSERT INTO "likes" ("state", "user_id", "likeable_id", "likeable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["state", true], ["user_id", 13], ["likeable_id", 2], ["likeable_type", "Item"], ["created_at", "2020-09-25 15:24:24.802577"], ["updated_at", "2020-09-25 15:24:24.802577"]]
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/likes_controller.rb:13:in `create'
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 6.3ms | Allocations: 12948)


